--- File: ./lib/core/constants/assets.dart ---

--- File: ./lib/core/router/app_router.dart ---
import 'package:flutter/material.dart';
import 'package:go_router/go_router.dart';
import '../../features/home/home_page.dart';
import '../../features/collecto/collecto_page.dart';

final appRouter = GoRouter(
  initialLocation: '/',
  routes: [
    GoRoute(
      path: '/',
      builder: (context, state) => const HomePage(),
    ),
    GoRoute(
      path: '/collecto',
      builder: (context, state) => const CollectoPage(),
    ),
  ],
);

--- File: ./lib/core/theme/app_colors.dart ---
import 'package:flutter/material.dart';

class AppColors {
  // Brand Colors
  static const Color primary = Color(0xFF00A3FF); // Blue
   static const Color brandGray = Color(0xFF6B7280); // Gray
  static const Color accent = Color(0xFFFF9900); // Orange
  

  static const Color background = lightBackground;
  static const Color border = lightBorder;
  static const Color textMain = lightTextMain;
  static const Color textBody = lightTextBody;
  static const Color primaryLight = Color(0xFFE0F5FF);

  // Light Mode Palette
  static const Color lightBackground = Color(0xFFFFFFFF);
  static const Color lightSurface = Color(0xFFF9FAFB); 
  static const Color lightTextMain = Color(0xFF111827); 
  static const Color lightTextBody = brandGray; 
  static const Color lightBorder = Color(0xFFE5E7EB);

  // Dark Mode Palette
  static const Color darkBackground = Color(0xFF0F1016); 
  static const Color darkSurface = Color(0xFF252836);    
  static const Color darkTextMain = Color(0xFFFFFFFF);   
  static const Color darkTextBody = Color(0xFF9CA3AF);   
  static const Color darkBorder = Color(0xFF3F4454);     
}
--- File: ./lib/core/theme/app_theme.dart ---
import 'package:flutter/material.dart';
import 'app_colors.dart';

class AppTheme {
  // 1. LIGHT THEME CONFIG
  static ThemeData get lightTheme {
    return ThemeData(
      brightness: Brightness.light,
      scaffoldBackgroundColor: AppColors.lightBackground,
      primaryColor: AppColors.primary,
      
      // Card Styles
      cardColor: AppColors.lightSurface,
      dividerColor: AppColors.lightBorder,

      // Text Styles
      textTheme: const TextTheme(
        displayLarge: TextStyle(color: AppColors.lightTextMain), // Headlines
        bodyLarge: TextStyle(color: AppColors.lightTextBody),    // Paragraphs
      ),
      
      // Icon Theme
      iconTheme: const IconThemeData(color: AppColors.lightTextMain),
    );
  }

  // 2. DARK THEME CONFIG
  static ThemeData get darkTheme {
    return ThemeData(
      brightness: Brightness.dark,
      scaffoldBackgroundColor: AppColors.darkBackground,
      primaryColor: AppColors.primary,

      // Card Styles
      cardColor: AppColors.darkSurface,
      dividerColor: AppColors.darkBorder,

      // Text Styles
      textTheme: const TextTheme(
        displayLarge: TextStyle(color: AppColors.darkTextMain),
        bodyLarge: TextStyle(color: AppColors.darkTextBody),
      ),

      // Icon Theme
      iconTheme: const IconThemeData(color: AppColors.darkTextMain),
    );
  }
}
--- File: ./lib/core/theme/theme_controller.dart ---
import 'package:flutter/material.dart';

// A global controller to switch themes
class ThemeController extends ValueNotifier<ThemeMode> {
  // Singleton pattern (so we can access it from anywhere easily)
  static final ThemeController instance = ThemeController._();

  ThemeController._() : super(ThemeMode.light); // Start with Light Mode

  void toggleTheme() {
    value = value == ThemeMode.light ? ThemeMode.dark : ThemeMode.light;
  }
}
--- File: ./lib/features/collecto/collecto_page.dart ---
import 'package:flutter/material.dart';
import '../../shared/layout/navbar.dart';
import '../../shared/layout/footer.dart';

class CollectoPage extends StatelessWidget {
  const CollectoPage({super.key});

  @override
  Widget build(BuildContext context) {
    return const Scaffold(
      body: SingleChildScrollView(
        child: Column(
          children: [
            Navbar(),
            SizedBox(height: 100),
            Center(child: Text("Collecto Page Content Coming Soon")),
            SizedBox(height: 100),
            Footer(),
          ],
        ),
      ),
    );
  }
}

--- File: ./lib/features/home/home_page.dart ---
import 'package:flutter/material.dart';
import '../../shared/layout/navbar.dart';
import 'widgets/hero_section.dart';
import 'widgets/logo_marquee.dart';
import 'widgets/agents_sec.dart';
import 'widgets/bento_grid.dart';
import 'widgets/target.dart';
import 'widgets/socialtrend.dart';
import 'widgets/product.dart';
import 'widgets/packages.dart';
import '../../shared/layout/footer.dart';
import 'widgets/cta_section.dart';

class HomePage extends StatefulWidget {
  const HomePage({super.key});

  @override
  State<HomePage> createState() => _HomePageState();
}

class _HomePageState extends State<HomePage> {
  // 1. Create a ScrollController
  late ScrollController _scrollController;

  @override
  void initState() {
    super.initState();
    _scrollController = ScrollController();
  }

  @override
  void dispose() {
    _scrollController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: Stack(
        children: [
          // 2. Attach the controller to the SingleChildScrollView
          SingleChildScrollView(
            controller: _scrollController,
            child: Column(
              children: [
                const HeroSection(),
                const AgentsSection(),
                const BentoGridSection(),
                const TargetAudienceSection(),
                const SocialTrendSection(),
                const ProductivitySection(),
                const CallToActionSection(),
                const LogoMarquee(),
                const Footer(),
            ],
          ),
          ),

          // 3. Pass the controller to the Navbar
          Positioned(
            top: 0,
            left: 0,
            right: 0,
            child: Navbar(scrollController: _scrollController),
          ),
        ],
      ),
    );
  }
}
--- File: ./lib/features/home/widgets/agents_sec.dart ---
import 'package:flutter/material.dart';
import 'package:flutter_animate/flutter_animate.dart';
import '../../../core/theme/app_colors.dart';
import '../../../shared/widgets/fade_in_scroll.dart';

class AgentsSection extends StatelessWidget {
  const AgentsSection({super.key});

  static const List<Map<String, dynamic>> _features = [
    {
      "titleImage": "assets/images/collecto_logo2.png",
      "desc": "A modular service that automates payments, tracks staff performance and gives real time clarity to your business.",
      "image": "assets/images/im1.png",
      "delay": 100,
    },
    {
      "titleImage": "assets/images/eworker.png",
      "desc": "Track payments in real-time with eWorker ID.",
      "image": "assets/images/biometric.webp",
      "delay": 200,
    },
    {
      
      "titleImage": "assets/images/bulk_logo.png",
      "desc": "Allow us to handle your bulk payments saving you time and resources you would take doing manual transfers.",
      "image": "assets/images/money1.gif",
      "delay": 300,
    },
     {
      "titleImage": "assets/images/cissy_cloud.png",
      "desc": "Secure cloud storage and computing solutions.",
      "image": "assets/images/cloud3.gif",
      "delay": 400,
    },
     {
      "titleImage": "assets/images/cissydrive.png", 
      "desc": "Backup and manage your files with CissyDrive to ensure they are protected and safe online.",
      "image": "assets/images/drive3.gif",
      "delay": 500,
    },
  ];

  @override
  Widget build(BuildContext context) {
    // 1. Capture Dynamic Colors
    final bgColor = Theme.of(context).scaffoldBackgroundColor;
    final textColor = Theme.of(context).textTheme.displayLarge?.color;
    final bodyColor = Theme.of(context).textTheme.bodyLarge?.color;


    return Container(
      width: double.infinity,
      color: bgColor, 
      padding: const EdgeInsets.symmetric(vertical: 80, horizontal: 20),
      child: Column(
        children: [
          // 1. HEADLINE (Animated)
          FadeInScroll(
            child: Text(
              "Our Core products.",
              style: TextStyle(
                fontSize: 48,
                fontWeight: FontWeight.w800,
                color: textColor,
                letterSpacing: -1.5,
                fontFamily: 'Inter',
              ),
              textAlign: TextAlign.center,
            ),
          ),
          
          const SizedBox(height: 16),

          // 2. SUBTITLE (Animated)
          FadeInScroll(
            delay: const Duration(milliseconds: 200),
            child: Text(
              "Tailored modules designed to automate workflows, \nmanage cash flow, and boost engagement.",
              style: TextStyle(
                fontSize: 18,
                color: bodyColor,
                height: 1.5,
              ),
              textAlign: TextAlign.center,
            ),
          ),

          const SizedBox(height: 60),

          // 3. THE CARDS (Swapped to Stateful Widget for Hover Animation)
          Wrap(
            spacing: 24,
            runSpacing: 24,
            alignment: WrapAlignment.center,
            children: _features.map((feature) => _HoverFeatureCard(
              titleImage: feature["titleImage"],
              description: feature["desc"],
              image: feature["image"],
              entranceDelay: feature["delay"],
            )).toList(),
          ),
        ],
      ),
    );
  }
}

// --- NEW STATEFUL WIDGET FOR ANIMATION ---
class _HoverFeatureCard extends StatefulWidget {
  final String titleImage;
  final String description;
  final String image;
  final int entranceDelay;

  const _HoverFeatureCard({
    required this.titleImage,
    required this.description,
    required this.image,
    this.entranceDelay = 0,
  });

  @override
  State<_HoverFeatureCard> createState() => _HoverFeatureCardState();
}

class _HoverFeatureCardState extends State<_HoverFeatureCard> {
  bool isHovered = false;

  @override
  Widget build(BuildContext context) {
    // Capture colors inside the widget (Exact same logic as before)
    final cardColor = Theme.of(context).cardColor;
    final textColor = Theme.of(context).textTheme.displayLarge?.color;
    final bodyColor = Theme.of(context).textTheme.bodyLarge?.color;
    final borderColor = Theme.of(context).dividerColor;
    final isDark = Theme.of(context).brightness == Brightness.dark;

    return FadeInScroll(
      delay: Duration(milliseconds: widget.entranceDelay),
      child: MouseRegion(
      onEnter: (_) => setState(() => isHovered = true),
      onExit: (_) => setState(() => isHovered = false),
      child: AnimatedContainer(
        duration: const Duration(milliseconds: 200),
        curve: Curves.easeOut,
        width: 350,
        height: 480,
        // 1. LIFT ANIMATION
        transform: isHovered ? Matrix4.translationValues(0, -10, 0) : Matrix4.identity(),
        decoration: BoxDecoration(
          color: cardColor, 
          borderRadius: BorderRadius.circular(24),
          // 2. GLOW/SHADOW ANIMATION
          boxShadow: isHovered 
            ? [
                BoxShadow(
                  color: AppColors.primary.withOpacity(0.15), // Glow on hover
                  blurRadius: 30, 
                  offset: const Offset(0, 20)
                )
              ]
            : [
                // Inherited Shadow logic from your code
                // Note: I removed the static shadow to keep it clean, or we can add it back lightly
                BoxShadow(color: Colors.black.withOpacity(0.0), blurRadius: 0), 
              ],
          // 3. BORDER ANIMATION (Highlight on hover, Divider color on normal)
          border: isHovered 
            ? Border.all(color: AppColors.primary.withOpacity(0.5), width: 1)
            : Border.all(color: borderColor), 
        ),
        child: Column(
          children: [
            Padding(
              padding: const EdgeInsets.fromLTRB(32, 32, 32, 0),
              child: Column(
                children: [
                  Image.asset(widget.titleImage, height: 40),
                  const SizedBox(height: 12),
                  Text(
                    widget.description,
                    textAlign: TextAlign.center,
                    style: TextStyle(
                      color: bodyColor,
                      fontSize: 16,
                      height: 1.5,
                    ),
                  ),
                ],
              ),
            ),

            const Spacer(),

            // 5. IMAGE SCALE ANIMATION
            AnimatedScale(
              scale: isHovered ? 1.05 : 1.0, // Slight zoom
              duration: const Duration(milliseconds: 300),
              curve: Curves.easeOutBack,
              child: Container(
                height: 240, 
                width: double.infinity,
                margin: const EdgeInsets.fromLTRB(24, 0, 24, 24), 
                decoration: BoxDecoration(
                  color: isDark ? Colors.black : Colors.white, 
                  borderRadius: BorderRadius.circular(16), 
                  border: Border.all(color: borderColor),
                  boxShadow: [
                     BoxShadow(
                      color: Colors.black.withOpacity(0.08),
                      blurRadius: 15,
                      offset: const Offset(0, 5),
                    ),
                  ],
                  image: DecorationImage(
                     image: widget.image.startsWith('http') 
                        ? NetworkImage(widget.image)
                        : AssetImage(widget.image) as ImageProvider,
                    fit: BoxFit.cover,
                    alignment: Alignment.topCenter, 
                  ),
                ),
              ),
            ),
          ],
        ), // Column
      ), // AnimatedContainer
    ), // MouseRegion
    ); // FadeInScroll
  }
}
--- File: ./lib/features/home/widgets/bento_grid.dart ---
import 'package:flutter/material.dart';
import '../../../shared/widgets/video_thumbnail.dart';
import '../../../core/theme/app_colors.dart';
import '../../../shared/widgets/fade_in_scroll.dart';

class BentoGridSection extends StatelessWidget {
  const BentoGridSection({super.key});

  @override
  Widget build(BuildContext context) {
    final bgColor = Theme.of(context).scaffoldBackgroundColor;

    return Container(
      color: bgColor, 
      padding: const EdgeInsets.symmetric(vertical: 60, horizontal: 20),
      child: Center(
        child: ConstrainedBox(
          constraints: const BoxConstraints(maxWidth: 1000),
          child: Column(
            children: [
               // 1. HEADLINE
              FadeInScroll(
                child: Text(
                  "Manage your business with ease.",
                  style: TextStyle(
                    fontSize: 48,
                    fontWeight: FontWeight.w800,
                    color: Theme.of(context).textTheme.displayLarge?.color,
                    letterSpacing: -1.5,
                    fontFamily: 'Inter',
                  ),
                  textAlign: TextAlign.center,
                ),
              ),
              
              const SizedBox(height: 16),

              // 2. SUBTITLE
              FadeInScroll(
                delay: const Duration(milliseconds: 200),
                child: Text(
                  "Take a peek at some of our tools and how they can help you manage your business.",
                  style: TextStyle(
                    fontSize: 18,
                    color: Theme.of(context).textTheme.bodyLarge?.color,
                    height: 1.5,
                  ),
                  textAlign: TextAlign.center,
                ),
              ),

              const SizedBox(height: 60),

              LayoutBuilder(
                builder: (context, constraints) {
                  bool isMobile = constraints.maxWidth < 900;
                  
                  // PUT YOUR YOUTUBE LINKS HERE
                  // Make sure these are Unlisted or Public on YouTube
                  const String mainVideoUrl = 'https://youtu.be/HwGSG1fKa-w'; 
                  
                  if (isMobile) {
                    return Column(
                      children: [
                        _HoverBentoCard(
                          height: 380, 
                          delay: 200,
                          padding: EdgeInsets.zero,
                          child: const VideoThumbnail(
                            videoUrl: mainVideoUrl,
                            title: 'Watch Demo',
                          ),
                        ),
                        const SizedBox(height: 20),
                        const _HoverBentoCard(
                          height: 420, 
                          delay: 300,
                          child: _BentoImageCard(
                            title: "Track payments in real-time", 
                            imagePath: "assets/images/collecto_ad.png",
                          ),
                        ),
                        const SizedBox(height: 20),
                        const _HoverBentoCard(
                          height: 480, 
                          delay: 400,
                          child: _BentoImageCard(
                             title: "Fast and seamless biometric tracking",
                             imagePath: "assets/images/bulk_ad.png",
                             height: 380,
                          ),
                        ),
                      ],
                    );
                  } else {
                    return Row(
                      crossAxisAlignment: CrossAxisAlignment.start,
                      children: [
                        // COLUMN 1
                        Expanded(
                          child: Column(
                            children: [
                               _HoverBentoCard(
                                height: 380, 
                                delay: 100,
                                padding: EdgeInsets.zero,
                                child: const VideoThumbnail(
                                  videoUrl: mainVideoUrl,
                                  title: 'Watch Demo',
                                ),
                              ),
                              const SizedBox(height: 20),
                              const _HoverBentoCard(
                                height: 420, 
                                delay: 200, 
                                child: _BentoImageCard(
                                   title: "Track payments in real-time",
                                   imagePath: "assets/images/collect_ad3.png",
                                ),
                              ),
                            ],
                          ),
                        ),
                        const SizedBox(width: 20),
                        // COLUMN 2
                        Expanded(
                          child: Column(
                            children: [
                              const _HoverBentoCard(
                                height: 430, 
                                delay: 300, 
                                child: _BentoImageCard(
                                  title: "Fast and seamless biometric tracking", 
                                  imagePath: "assets/images/bulk_ad3.png",
                                  height: 290,
                                ),
                              ),
                              const SizedBox(height: 20),
                              _HoverBentoCard(
                                height: 400, 
                                delay: 400, 
                                padding: EdgeInsets.zero, 
                                child: _BentoImageCard(
                                  title: "Fast and seamless biometric tracking", 
                                  imagePath: "assets/images/collecto_ad2.png",
                                  height: 290,
                                ),
                              ),
                            ],
                          ),
                        ),
                      ],
                    );
                  }
                },
              ),
            ],
          ),
        ),
      ),
    );
  }
}

// --- NEW ANIMATED BENTO CARD ---
class _HoverBentoCard extends StatefulWidget {
  final Widget child;
  final double height;
  final EdgeInsetsGeometry? padding;
  final int delay;

  const _HoverBentoCard({
    required this.child, 
    required this.height, 
    this.padding,
    this.delay = 0
  });

  @override
  State<_HoverBentoCard> createState() => _HoverBentoCardState();
}

class _HoverBentoCardState extends State<_HoverBentoCard> {
  bool isHovered = false;

  @override
  Widget build(BuildContext context) {
    final cardColor = Theme.of(context).cardColor;
    final borderColor = Theme.of(context).dividerColor;
    
    return FadeInScroll(
      delay: Duration(milliseconds: widget.delay),
      child: MouseRegion(
        onEnter: (_) => setState(() => isHovered = true),
        onExit: (_) => setState(() => isHovered = false),
        child: AnimatedContainer(
          duration: const Duration(milliseconds: 200),
          curve: Curves.easeOut,
          height: widget.height,
          width: double.infinity,
          padding: widget.padding ?? const EdgeInsets.all(24),
          transform: isHovered ? Matrix4.translationValues(0, -6, 0) : Matrix4.identity(),
          decoration: BoxDecoration(
            color: cardColor, 
            borderRadius: BorderRadius.circular(20),
            border: Border.all(
              color: isHovered ? AppColors.primary.withOpacity(0.3) : borderColor,
              width: 1
            ),
            boxShadow: [
               if (isHovered)
                 BoxShadow(color: AppColors.primary.withOpacity(0.1), blurRadius: 20, offset: const Offset(0, 10)),
            ],
          ),
          child: ClipRRect(
            borderRadius: BorderRadius.circular(20),
            child: widget.child,
          ),
        ),
      ),
    );
  }
}

// --- DYNAMIC IMAGE CARD ITEM ---
class _BentoImageCard extends StatelessWidget {
  final String title;
  final String imagePath;
  final double height; 

  const _BentoImageCard({
    required this.title,
    required this.imagePath,
    this.height = 200,
  });

  @override
  Widget build(BuildContext context) {
    return Container(
      height: height,
      decoration: BoxDecoration(
        borderRadius: BorderRadius.circular(20),
        image: DecorationImage(
          image: AssetImage(imagePath),
          fit: BoxFit.cover, // Fill the card completely
          // No overlay - images show in full color
        ),
      ),
      padding: const EdgeInsets.all(24),
      alignment: Alignment.bottomLeft,
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        mainAxisSize: MainAxisSize.min,
        children: [
          Text(
            title,
            style: const TextStyle(
              fontSize: 22,
              fontWeight: FontWeight.bold,
              color: Colors.white,
            ),
          ),
        ],
      ),
    );
  }
}
--- File: ./lib/features/home/widgets/cta_section.dart ---
import 'package:flutter/material.dart';
import 'package:flutter_animate/flutter_animate.dart';
import '../../../core/theme/app_colors.dart';
import '../../../shared/widgets/fade_in_scroll.dart';

class CallToActionSection extends StatelessWidget {
  const CallToActionSection({super.key});

  @override
  Widget build(BuildContext context) {
    // Theme logic
    final isDark = Theme.of(context).brightness == Brightness.dark;
    
    // Background: Dark in both modes for contrast, or dynamic. 
    // Usually CTAs pop best when they are dark with bright text.
    final containerColor = isDark ? Colors.black : const Color(0xFF0F1016);

    return Container(
      color: Theme.of(context).scaffoldBackgroundColor, // Matches page bg
      padding: const EdgeInsets.symmetric(vertical: 100, horizontal: 24),
      child: Center(
        child: ClipRRect(
          borderRadius: BorderRadius.circular(32),
          child: Stack(
            children: [
              // 1. ANIMATED AURORA BACKGROUND
              // We layer multiple containers with gradients and animate their opacity/position
              Positioned.fill(
                child: Container(color: containerColor),
              ),
              
              // Gradient Blob 1 (Blue) - Moving Top Left to Bottom Right
              Positioned(
                top: -100, left: -100,
                child: Container(
                  width: 400, height: 400,
                  decoration: BoxDecoration(
                    shape: BoxShape.circle,
                    color: AppColors.primary.withOpacity(0.4),
                    backgroundBlendMode: BlendMode.screen, // Cool blending effect
                  ),
                ).animate(onPlay: (c) => c.repeat(reverse: true))
                 .scale(begin: const Offset(1,1), end: const Offset(1.5, 1.5), duration: 4.seconds)
                 .move(begin: const Offset(0,0), end: const Offset(50, 50), duration: 4.seconds),
              ),

              // Gradient Blob 2 (Orange) - Moving Bottom Right to Top Left
              Positioned(
                bottom: -100, right: -100,
                child: Container(
                  width: 300, height: 300,
                  decoration: BoxDecoration(
                    shape: BoxShape.circle,
                    color: AppColors.accent.withOpacity(0.3),
                    backgroundBlendMode: BlendMode.screen,
                  ),
                ).animate(onPlay: (c) => c.repeat(reverse: true))
                 .scale(begin: const Offset(1,1), end: const Offset(1.2, 1.2), duration: 3.seconds)
                 .move(begin: const Offset(0,0), end: const Offset(-30, -30), duration: 5.seconds),
              ),

              // Gradient Blob 3 (Purple) - Breathing in center
              Positioned.fill(
                child: Center(
                  child: Container(
                    width: 600, height: 200,
                    decoration: BoxDecoration(
                      shape: BoxShape.rectangle,
                      color: Colors.purple.withOpacity(0.2),
                      backgroundBlendMode: BlendMode.screen,
                      borderRadius: BorderRadius.circular(100)
                    ),
                  ).animate(onPlay: (c) => c.repeat(reverse: true))
                   .fade(begin: 0.2, end: 0.5, duration: 2.seconds),
                ),
              ),
              
              // Glassmorphism Overlay (Blur) to smooth out the blobs
              Positioned.fill(
                child: Container( // Using a container with backdrop filter
                   decoration: BoxDecoration(
                     color: Colors.black.withOpacity(0.1), // Slight tint
                   ),
                ),
              ),

              // 2. CONTENT
              Padding(
                padding: const EdgeInsets.symmetric(vertical: 80, horizontal: 20),
                child: Column(
                  mainAxisSize: MainAxisSize.min,
                  children: [
                    FadeInScroll(
                      child: const Text(
                        "Ready to scale your business?",
                        textAlign: TextAlign.center,
                        style: TextStyle(
                          fontSize: 42,
                          fontWeight: FontWeight.w800,
                          color: Colors.white, // Always white on this dark background
                          letterSpacing: -1.0,
                        ),
                      ),
                    ),
                    
                    const SizedBox(height: 16),
                    
                    FadeInScroll(
                      delay: const Duration(milliseconds: 100),
                      child: const Text(
                        "Join the network of innovators using CissyTech to \noptimize operations and drive revenue.",
                        textAlign: TextAlign.center,
                        style: TextStyle(
                          fontSize: 18,
                          color: Colors.white70,
                          height: 1.5,
                        ),
                      ),
                    ),

                    const SizedBox(height: 40),

                    // 3. PULSING BUTTON
                    FadeInScroll(
                      delay: const Duration(milliseconds: 200),
                      child: MouseRegion(
                        cursor: SystemMouseCursors.click,
                        child: ElevatedButton(
                          onPressed: () {},
                          style: ElevatedButton.styleFrom(
                            backgroundColor: Colors.white,
                            foregroundColor: Colors.black,
                            padding: const EdgeInsets.symmetric(horizontal: 40, vertical: 24),
                            shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(100)),
                            elevation: 10,
                            shadowColor: Colors.white.withOpacity(0.3),
                          ),
                          child: const Text(
                            "Get Started",
                            style: TextStyle(fontSize: 18, fontWeight: FontWeight.bold),
                          ),
                        ),
                      )
                      .animate(onPlay: (c) => c.repeat(reverse: true)) // Heartbeat loop
                      .scale(begin: const Offset(1,1), end: const Offset(1.05, 1.05), duration: 1.seconds),
                    ),
                  ],
                ),
              ),
            ],
          ),
        ),
      ),
    );
  }
}
--- File: ./lib/features/home/widgets/hero_section.dart ---
import 'package:flutter/material.dart';
import '../../../core/theme/app_colors.dart';
import '../../../shared/layout/responsive.dart';
import 'package:flutter_animate/flutter_animate.dart';
import 'package:animated_text_kit/animated_text_kit.dart';
import '../../../shared/widgets/fade_in_scroll.dart';
import 'infinite_scroll.dart'; 

class HeroSection extends StatelessWidget {
  const HeroSection({super.key});

  @override
  Widget build(BuildContext context) {
    // 1. CAPTURE THEME COLORS
    final bgColor = Theme.of(context).scaffoldBackgroundColor;
    
    return Responsive(
      // --- DESKTOP LAYOUT ---
      desktop: Container(
        color: bgColor,
        // CHANGED: Use alignment to center the constrained content
        alignment: Alignment.topCenter,
        child: ConstrainedBox(
          // CHANGED: Constrain max width to 1200 to match Navbar
          constraints: const BoxConstraints(maxWidth: 1200),
          child: Padding(
            // CHANGED: Match Navbar's internal horizontal padding (24) so alignment is perfect
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Row(
              crossAxisAlignment: CrossAxisAlignment.start,
              children: [
                // LEFT SIDE (Text Content)
                Expanded(
                  flex: 7, 
                  child: Padding(
                    padding: const EdgeInsets.only(top: 180),
                    child: _buildTextContent(context),
                  )
                ),
                
                const SizedBox(width: 40),
                
                // RIGHT SIDE (Scrolling Cards)
                Expanded(
                  flex: 5, 
                  child: Padding(
                    padding: const EdgeInsets.only(top: 60),
                    child: SizedBox(
                      height: 550,
                      child: FadeInScroll(
                        duration: const Duration(milliseconds: 800),
                        slideOffset: const Offset(0.1, 0), // slideX equivalent
                        child: Align(
                          alignment: Alignment.topCenter,
                          child: SizedBox(
                            width: 450, 
                            child: _buildScrollingCards(context),
                          ),
                        ),
                      ),
                    ),
                  ),
                ),
              ],
            ),
          ),
        ),
      ),
      
      // MOBILE LAYOUT
      mobile: Container(
        color: bgColor,
        padding: const EdgeInsets.fromLTRB(20, 120, 20, 60),
        child: Column(
          children: [
            _buildTextContent(context, isCentered: true),
            const SizedBox(height: 60),
            FadeInScroll(
              duration: const Duration(milliseconds: 2000),
              child: SizedBox(
                height: 300,
                width: 340, 
                child: _buildScrollingCards(context),
              ),
            ),
          ],
        ),
      ),
    );
  }

  // SCROLLING CARDS LIST
  Widget _buildScrollingCards(BuildContext context) {
    return InfiniteScrollColumn(
      speed: 0.8, 
      items: const [
        // 1. Image Card (Dark)
        _HeroImageCard(
          text: "Transform your company into a digital leader.",
          imageUrl: "assets/images/business2.png",
          opacity: 0.6,
        ),
        
        // 2. Testimonial Card
        _HeroTestimonialCard(
          name: "Benjamin Austin",
          role: "CTO, Stanbic Bank",
          avatarUrl: "https://i.pravatar.cc/150?img=11",
        ),

        // 3. Image Card (Blue-ish)
        _HeroImageCard(
          text: "Get an all in one solution for your business with our bundle.",
          imageUrl: "assets/images/bundle1.png",
          opacity: 0.4,
          overlayColor: Color(0xFF1E1E2D),
        ),

        // 4. Testimonial Card
        _HeroTestimonialCard(
          name: "Sarah Jenkins",
          role: "Marketing Lead, Airtel",
          avatarUrl: "https://i.pravatar.cc/150?img=5",
        ),
      ],
    );
  }

  // --- TEXT CONTENT (Unchanged) ---
  Widget _buildTextContent(BuildContext context, {bool isCentered = false}) {
    final textColor = Theme.of(context).textTheme.displayLarge?.color;
    final bodyColor = Theme.of(context).textTheme.bodyLarge?.color;
    final borderColor = Theme.of(context).dividerColor;
    final isDark = Theme.of(context).brightness == Brightness.dark;

    return Column(
      crossAxisAlignment: isCentered ? CrossAxisAlignment.center : CrossAxisAlignment.start,
      children: [

        FadeInScroll(
          duration: const Duration(milliseconds: 400),
          child: SizedBox(
            height: 160,
            child: DefaultTextStyle(
              textAlign: isCentered ? TextAlign.center : TextAlign.start,
              style: TextStyle(
                fontSize: 48,
                height: 1.1,
                fontWeight: FontWeight.w800,
                color: textColor,
                letterSpacing: -1.5,
                fontFamily: 'Inter',
              ),
              child: AnimatedTextKit(
                repeatForever: true,
                pause: const Duration(seconds: 3),
                animatedTexts: [
                  TypewriterAnimatedText('We build software\nthat meets your business needs.', speed: const Duration(milliseconds: 100), cursor: '|'),
                  TypewriterAnimatedText('We build software\n that enhances efficiency and growth.', speed: const Duration(milliseconds: 100), cursor: '|'),
                ],
                onTap: () {},
              ),
            ),
          ),
        ),

        const SizedBox(height: 24),
        
        FadeInScroll(
          delay: const Duration(milliseconds: 100),
          duration: const Duration(milliseconds: 400),
          child: Text(
            "Be part of the CissyTech ecosystem and drive your business forward.",
            textAlign: isCentered ? TextAlign.center : TextAlign.start,
            style: TextStyle(fontSize: 18, color: bodyColor, height: 1.5),
          ),
        ),

        const SizedBox(height: 40),
        
        Wrap(
          spacing: 16,
          runSpacing: 16,
          alignment: isCentered ? WrapAlignment.center : WrapAlignment.start,
          children: [
            FadeInScroll(
              delay: const Duration(milliseconds: 200),
              child: ElevatedButton(
                onPressed: () {},
                style: ElevatedButton.styleFrom(
                  backgroundColor: AppColors.primary,
                  foregroundColor: Colors.white,
                  padding: const EdgeInsets.symmetric(horizontal: 32, vertical: 22),
                  shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(12)),
                ),
                child: const Text("Start Free Trial", style: TextStyle(fontSize: 16)),
              )
              .animate(onPlay: (c) => c.repeat())
              .shimmer(delay: 4000.ms, duration: 1800.ms, color: Colors.white.withOpacity(0.3)),
            ),

            FadeInScroll(
              delay: const Duration(milliseconds: 400),
              child: OutlinedButton.icon(
                onPressed: () {},
                icon: Icon(Icons.play_arrow_rounded, color: textColor),
                label: Text("Watch Demo", style: TextStyle(color: isDark ? Colors.white : AppColors.brandGray, fontSize: 16)),
                style: OutlinedButton.styleFrom(
                  padding: const EdgeInsets.symmetric(horizontal: 24, vertical: 22),
                  side: BorderSide(color: isDark ? Colors.white.withOpacity(0.3) : AppColors.brandGray.withOpacity(0.5)),
                  shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(12)),
                ),
              ),
            ),
          ],
        ),

        const SizedBox(height: 40),
        
        FadeInScroll(
          delay: const Duration(milliseconds: 600),
          child: Wrap(
            alignment: isCentered ? WrapAlignment.center : WrapAlignment.start,
            crossAxisAlignment: WrapCrossAlignment.center,
            spacing: 20,
            children: [
               Row(
                 mainAxisSize: MainAxisSize.min,
                 children: const [
                  _HoverAvatar(imagePath: "assets/images/bulk_sms.png"),
                  _HoverAvatar(imagePath: "assets/images/cissy_cloud.png"),
                  _HoverAvatar(imagePath: "assets/images/collecto_logo.png"),
                  _HoverAvatar(imagePath: "assets/images/eworker.png"),
                 ],
               ),
               Text(
                 "Trusted by 20+\ncompanies",
                 style: TextStyle(fontWeight: FontWeight.w600, color: bodyColor),
               ),
            ],
          ),
        ),
      ],
    );
  }
}

class _HoverAvatar extends StatefulWidget {
  final String imagePath;
  const _HoverAvatar({required this.imagePath});

  @override
  State<_HoverAvatar> createState() => _HoverAvatarState();
}

class _HoverAvatarState extends State<_HoverAvatar> {
  bool isHovered = false;

  @override
  Widget build(BuildContext context) {
    final borderColor = Theme.of(context).scaffoldBackgroundColor;

    return Align(
      widthFactor: 0.7,
      child: MouseRegion(
        onEnter: (_) => setState(() => isHovered = true),
        onExit: (_) => setState(() => isHovered = false),
        child: AnimatedScale(
          scale: isHovered ? 1.2 : 1.0,
          duration: const Duration(milliseconds: 200),
          curve: Curves.easeOutBack,
          child: Container(
            width: 50,
            height: 50,
            decoration: BoxDecoration(
              color: Colors.white,
              shape: BoxShape.circle,
              border: Border.all(color: borderColor, width: 3), 
              boxShadow: [
                if (isHovered)
                  BoxShadow(color: Colors.black.withOpacity(0.2), blurRadius: 10, offset: const Offset(0, 5))
              ],
            ),
            child: ClipOval(
              child: Image.asset(
                widget.imagePath,
                fit: BoxFit.cover,
                errorBuilder: (c, o, s) => Container(color: Colors.grey.shade300),
              ),
            ),
          ),
        ),
      ),
    );
  }
}

// --- 1. DYNAMIC IMAGE CARD ---
class _HeroImageCard extends StatelessWidget {
  final String text;
  final String imageUrl;
  final double opacity;
  final Color overlayColor;

  const _HeroImageCard({
    required this.text,
    required this.imageUrl,
    this.opacity = 0.6,
    this.overlayColor = Colors.black,
  });

  @override
  Widget build(BuildContext context) {
    return Container(
      height: 340,
      width: double.infinity,
      padding: const EdgeInsets.all(40),
      decoration: BoxDecoration(
        color: overlayColor,
        borderRadius: BorderRadius.circular(24),
        image: DecorationImage(
          image: NetworkImage(imageUrl),
          fit: BoxFit.cover,
          opacity: opacity,
        ),
      ),
      alignment: Alignment.bottomLeft,
      child: Text(
        text,
        style: const TextStyle(color: Colors.white, fontSize: 20, fontWeight: FontWeight.bold),
      ),
    );
  }
}

// --- 2. DYNAMIC TESTIMONIAL CARD ---
class _HeroTestimonialCard extends StatelessWidget {
  final String name;
  final String role;
  final String avatarUrl;

  const _HeroTestimonialCard({
    required this.name,
    required this.role,
    required this.avatarUrl,
  });

  @override
  Widget build(BuildContext context) {
    final cardColor = Theme.of(context).cardColor;
    final textColor = Theme.of(context).textTheme.displayLarge?.color;
    final bodyColor = Theme.of(context).textTheme.bodyLarge?.color;
    final borderColor = Theme.of(context).dividerColor;

    return Container(
      padding: const EdgeInsets.all(24),
      decoration: BoxDecoration(
        color: cardColor,
        borderRadius: BorderRadius.circular(32),
        border: Border.all(color: borderColor),
        boxShadow: [
          BoxShadow(color: Colors.black.withOpacity(0.05), blurRadius: 20, offset: const Offset(0, 10)),
        ],
      ),
      child: Row(
        children: [
          CircleAvatar(
            radius: 24,
            backgroundImage: NetworkImage(avatarUrl),
          ),
          const SizedBox(width: 16),
          Expanded(
            child: Column(
              crossAxisAlignment: CrossAxisAlignment.start,
              children: [
                Text(name, style: TextStyle(fontWeight: FontWeight.bold, fontSize: 16, color: textColor)),
                Text(role, style: TextStyle(color: bodyColor, fontSize: 13)),
              ],
            ),
          ),
          const Icon(Icons.star, color: AppColors.accent, size: 20),
        ],
      ),
    );
  }
}


--- File: ./lib/features/home/widgets/infinite_scroll.dart ---
import 'dart:async';
import 'package:flutter/material.dart';

class InfiniteScrollColumn extends StatefulWidget {
  final List<Widget> items; 
  final double speed;
  final bool reverse;

  const InfiniteScrollColumn({
    super.key,
    required this.items, 
    this.speed = 1.0,
    this.reverse = false,
  });

  @override
  State<InfiniteScrollColumn> createState() => _InfiniteScrollColumnState();
}

class _InfiniteScrollColumnState extends State<InfiniteScrollColumn> {
  late ScrollController _scrollController;
  late Timer _timer;

  @override
  void initState() {
    super.initState();
    _scrollController = ScrollController();
    WidgetsBinding.instance.addPostFrameCallback((_) {
      _startScrolling();
    });
  }

  void _startScrolling() {
    _timer = Timer.periodic(const Duration(milliseconds: 20), (timer) {
      if (!_scrollController.hasClients) return;
      double maxScroll = _scrollController.position.maxScrollExtent;
      double currentScroll = _scrollController.offset;
      double nextScroll = currentScroll + (widget.reverse ? -widget.speed : widget.speed);

      if (nextScroll >= maxScroll) {
        _scrollController.jumpTo(0);
      } else if (nextScroll <= 0) {
        _scrollController.jumpTo(maxScroll);
      } else {
        _scrollController.jumpTo(nextScroll);
      }
    });
  }

  @override
  void dispose() {
    _timer.cancel();
    _scrollController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    // Capture dynamic background color for the bottom fade
    final bgColor = Theme.of(context).scaffoldBackgroundColor;

    return SizedBox(
      width: double.infinity, 
      child: Stack(
        children: [
          // 1. The Scrolling List
          ListView.builder(
            controller: _scrollController,
            physics: const NeverScrollableScrollPhysics(),
            itemCount: 1000, 
            itemBuilder: (context, index) {
              final item = widget.items[index % widget.items.length];
              return Padding(
                padding: const EdgeInsets.only(bottom: 20),
                child: item,
              );
            },
          ),
          
          // 2. Bottom Fog (Modified to be dynamic and only at bottom)
          // We removed the Top Fog so items appear to scroll "into" the navbar area.
          Positioned(
            bottom: 0, left: 0, right: 0, height: 80,
            child: Container(
              decoration: BoxDecoration(
                gradient: LinearGradient(
                  begin: Alignment.bottomCenter,
                  end: Alignment.topCenter,
                  colors: [
                    bgColor, // Solid Theme Color at bottom
                    bgColor.withOpacity(0.0), // Transparent going up
                  ],
                ),
              ),
            ),
          ),
        ],
      ),
    );
  }
}
--- File: ./lib/features/home/widgets/logo_marquee.dart ---
import 'dart:async';
import 'package:flutter/material.dart';
import 'package:flutter_animate/flutter_animate.dart';
import '../../../core/theme/app_colors.dart';
import '../../../shared/widgets/fade_in_scroll.dart';


class LogoMarquee extends StatefulWidget {
  const LogoMarquee({super.key});

  @override
  State<LogoMarquee> createState() => _LogoMarqueeState();
}

class _LogoMarqueeState extends State<LogoMarquee> {
  late ScrollController _scrollController;
  late Timer _timer; 

  final List<String> _partnerLogos = [
    "assets/images/stanbic.png",
    "assets/images/flexi.png",
    "assets/images/airtel.png",
    "assets/images/partner1.png",
    "assets/images/hepsia.png",
  ];

  @override
  void initState() {
    super.initState();
    _scrollController = ScrollController();
    WidgetsBinding.instance.addPostFrameCallback((_) => _startAutoScroll());
  }

  void _startAutoScroll() {
    _timer = Timer.periodic(const Duration(milliseconds: 30), (timer) {
      if (!_scrollController.hasClients) return;

      double maxScroll = _scrollController.position.maxScrollExtent;
      double currentScroll = _scrollController.offset;
      double nextScroll = currentScroll + 1.0; 

      if (nextScroll >= maxScroll) {
        _scrollController.jumpTo(0);
      } else {
        _scrollController.jumpTo(nextScroll);
      }
    });
  }

  @override
  void dispose() {
    _timer.cancel();
    _scrollController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    // 1. Capture Dynamic Theme Colors
    final bgColor = Theme.of(context).scaffoldBackgroundColor;
    final bodyColor = Theme.of(context).textTheme.bodyLarge?.color;
    final textColor = Theme.of(context).textTheme.displayLarge?.color;
    final cardColor = Theme.of(context).cardColor;
    final borderColor = Theme.of(context).dividerColor;

    return Container(
      color: bgColor, // <--- Dynamic Background
      padding: const EdgeInsets.symmetric(vertical: 30),
      child: Column(
        children: [
          // 1. Header Text
          FadeInScroll(
            child: Text(
              "Trusted by leading companies in Uganda",
              style: TextStyle(
                fontSize: 18,
                color: bodyColor?.withOpacity(0.7), // <--- Dynamic Text
                fontWeight: FontWeight.w500,
              ),
            ),
          ),
          
          const SizedBox(height: 40),

          // 2. The Interactive Marquee
          FadeInScroll(
            delay: const Duration(milliseconds: 100),
            child: SizedBox(
              height: 80, 
              child: ListView.builder(
                controller: _scrollController,
                scrollDirection: Axis.horizontal,
                itemCount: 1000, 
                itemBuilder: (context, index) {
                  final logoPath = _partnerLogos[index % _partnerLogos.length];
                  return _MarqueeItem(imagePath: logoPath);
                },
              ),
            ),
          ),
        ],
      ),
    );
  }
}

// --- ANIMATED LOGO ITEM ---
class _MarqueeItem extends StatelessWidget {
  final String imagePath;
  const _MarqueeItem({required this.imagePath});

  @override
  Widget build(BuildContext context) {
    final isPriority = imagePath.contains("airtel") || imagePath.contains("stanbic");
    final double height = isPriority ? 60.0 : 20.0;
    final isDark = Theme.of(context).brightness == Brightness.dark;

    return Container(
      margin: const EdgeInsets.symmetric(horizontal: 30),
      padding: isDark ? const EdgeInsets.all(8.0) : EdgeInsets.zero,
      decoration: isDark
          ? BoxDecoration(
              color: Colors.white,
              borderRadius: BorderRadius.circular(8),
            )
          : null,
      child: Image.asset(
        imagePath,
        height: height,
        fit: BoxFit.contain,
        errorBuilder: (c, o, s) => const Icon(Icons.broken_image, color: Colors.grey),
      ),
    );
  }
}
--- File: ./lib/features/home/widgets/packages.dart ---
import 'package:flutter/material.dart';
import 'package:flutter_animate/flutter_animate.dart'; // Import Animate
import '../../../core/theme/app_colors.dart';
import '../../../shared/widgets/fade_in_scroll.dart';

class PricingSection extends StatefulWidget {
  const PricingSection({super.key});

  @override
  State<PricingSection> createState() => _PricingSectionState();
}

class _PricingSectionState extends State<PricingSection> {
  bool isYearly = false;

  final List<Map<String, dynamic>> _plans = [
    {
      "title": "Bronze",
      "monthly": "15", "yearly": "12",
      "desc": "For individuals with scheduling needs.",
      "features": {"Workspaces": "1", "Users": "1", "Social profiles": "5", "AI credits": "100"},
      "popular": false,
      "delay": 100
    },
    {
      "title": "Silver",
      "monthly": "39", "yearly": "31",
      "desc": "For small teams building their brand.",
      "features": {"Workspaces": "5", "Users": "5", "Social profiles": "20", "AI credits": "500"},
      "popular": false,
      "delay": 200
    },
    {
      "title": "Gold",
      "monthly": "79", "yearly": "63",
      "desc": "For bigger teams or solo freelancers.",
      "features": {"Workspaces": "20", "Users": "20", "Social profiles": "50", "AI credits": "1,500"},
      "popular": true,
      "delay": 300
    },
    {
      "title": "Diamond",
      "monthly": "159", "yearly": "127",
      "desc": "For large teams or marketing agencies.",
      "features": {"Workspaces": "", "Users": "50", "Social profiles": "150", "AI credits": ""},
      "popular": false,
      "delay": 400
    },
  ];


  @override
  Widget build(BuildContext context) {
    // 1. Capture Theme Colors
    final bgColor = Theme.of(context).scaffoldBackgroundColor;
    final textColor = Theme.of(context).textTheme.displayLarge?.color;
    final bodyColor = Theme.of(context).textTheme.bodyLarge?.color;
    final isDark = Theme.of(context).brightness == Brightness.dark;
    
    // Toggle Background
    final toggleBg = isDark ? const Color(0xFF1F2937) : Colors.grey.shade100;

    return Container(
      width: double.infinity,
      color: bgColor, 
      padding: const EdgeInsets.symmetric(vertical: 80, horizontal: 20),
      child: Column(
        children: [
          // 1. HEADLINE (Animated Pop)
          FadeInScroll(
            child: Text(
              "Flexible Plans",
              style: TextStyle(
                fontSize: 40,
                fontWeight: FontWeight.w800,
                letterSpacing: -1.0,
                color: textColor,
              ),
            ),
          ),
           
          const SizedBox(height: 16),
          
          FadeInScroll(
            delay: const Duration(milliseconds: 100),
            child: Text(
              "Choose a plan that scales with your business needs.",
              style: TextStyle(fontSize: 18, color: bodyColor),
              textAlign: TextAlign.center,
            ),
          ),
          
          const SizedBox(height: 40),

          // 2. TOGGLE SWITCH (Animated Fade)
          FadeInScroll(
            delay: const Duration(milliseconds: 200),
            child: Container(
              padding: const EdgeInsets.all(4),
              decoration: BoxDecoration(
                color: toggleBg, 
                borderRadius: BorderRadius.circular(8),
              ),
              child: Row(
                mainAxisSize: MainAxisSize.min,
                children: [
                  _buildOption("Monthly", !isYearly, context),
                  _buildOption("Yearly (save 20%)", isYearly, context),
                ],
              ),
            ),
          ),

          const SizedBox(height: 60),

          // 3. PRICING CARDS
          Center(
            child: ConstrainedBox(
              constraints: const BoxConstraints(maxWidth: 1200),
              child: Wrap(
                spacing: 20,
                runSpacing: 20,
                alignment: WrapAlignment.center,
                children: _plans.map((plan) {
                  return _HoverPricingCard(
                    title: plan['title'],
                    price: isYearly ? plan['yearly'] : plan['monthly'],
                    description: plan['desc'],
                    features: plan['features'],
                    isPopular: plan['popular'],
                    isYearly: isYearly,
                    delay: plan['delay'],
                  );
                }).toList(),
              ),
            ),
          ),
        ],
      ),
    );
  }

  // --- HELPER FOR TOGGLE ---
  Widget _buildOption(String text, bool isSelected, BuildContext context) {
    final isDark = Theme.of(context).brightness == Brightness.dark;
    
    // Selected Tab Color
    final selectedColor = isDark ? const Color(0xFF374151) : Colors.white;
    final textColor = Theme.of(context).textTheme.displayLarge?.color;
    final unselectedTextColor = Theme.of(context).textTheme.bodyLarge?.color;

    return GestureDetector(
      onTap: () => setState(() => isYearly = text.contains("Yearly")),
      child: AnimatedContainer(
        duration: const Duration(milliseconds: 200),
        padding: const EdgeInsets.symmetric(horizontal: 20, vertical: 8),
        decoration: BoxDecoration(
          color: isSelected ? selectedColor : Colors.transparent,
          borderRadius: BorderRadius.circular(6),
          boxShadow: isSelected
              ? [BoxShadow(color: Colors.black.withOpacity(0.05), blurRadius: 4, offset: const Offset(0, 2))]
              : [],
        ),
        child: Text(
          text,
          style: TextStyle(
            fontWeight: FontWeight.w600,
            color: isSelected ? textColor : unselectedTextColor,
          ),
        ),
      ),
    );
  }
}

// --- NEW ANIMATED HOVER CARD ---
class _HoverPricingCard extends StatefulWidget {
  final String title;
  final String price;
  final String description;
  final Map<String, String> features;
  final bool isPopular;
  final bool isYearly;
  final int delay;

  const _HoverPricingCard({
    required this.title,
    required this.price,
    required this.description,
    required this.features,
    this.isPopular = false,
    required this.isYearly,
    this.delay = 0,
  });

  @override
  State<_HoverPricingCard> createState() => _HoverPricingCardState();
}

class _HoverPricingCardState extends State<_HoverPricingCard> {
  bool isHovered = false;

  @override
  Widget build(BuildContext context) {
    final isDark = Theme.of(context).brightness == Brightness.dark;
    final cardColor = Theme.of(context).cardColor;
    final borderColor = Theme.of(context).dividerColor;
    final textColor = Theme.of(context).textTheme.displayLarge?.color;
    final bodyColor = Theme.of(context).textTheme.bodyLarge?.color;

    return FadeInScroll(
      delay: Duration(milliseconds: widget.delay),
      child: MouseRegion(
        onEnter: (_) => setState(() => isHovered = true),
        onExit: (_) => setState(() => isHovered = false),
        child: AnimatedContainer(
          duration: const Duration(milliseconds: 200),
          width: 280,
          padding: const EdgeInsets.all(32),
          // 1. LIFT EFFECT
          transform: isHovered ? Matrix4.translationValues(0, -10, 0) : Matrix4.identity(),
          decoration: BoxDecoration(
            color: cardColor, 
            borderRadius: BorderRadius.circular(16),
            // 2. BORDER HIGHLIGHT
            border: Border.all(
              color: isHovered ? AppColors.primary.withOpacity(0.5) : borderColor,
              width: isHovered ? 2 : 1
            ),
            // 3. GLOW EFFECT
            boxShadow: isHovered
              ? [BoxShadow(color: AppColors.primary.withOpacity(0.15), blurRadius: 30, offset: const Offset(0, 10))]
              : [BoxShadow(color: Colors.black.withOpacity(0.05), blurRadius: 20, offset: const Offset(0, 10))],
          ),
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              // Title & Badge
              Row(
                mainAxisAlignment: MainAxisAlignment.spaceBetween,
                children: [
                  Container(
                    padding: const EdgeInsets.symmetric(horizontal: 10, vertical: 4),
                    decoration: BoxDecoration(
                      border: Border.all(color: borderColor),
                      borderRadius: BorderRadius.circular(6),
                    ),
                    child: Text(
                      widget.title,
                      style: TextStyle(fontWeight: FontWeight.bold, fontSize: 14, color: textColor),
                    ),
                  ),
                  if (widget.isPopular)
                    Container(
                      padding: const EdgeInsets.symmetric(horizontal: 10, vertical: 4),
                      decoration: BoxDecoration(
                        color: isDark ? const Color(0xFF064E3B) : const Color(0xFFDCFCE7),
                        borderRadius: BorderRadius.circular(6),
                      ),
                      child: Text(
                        "Most popular",
                        style: TextStyle(
                          fontWeight: FontWeight.bold, 
                          fontSize: 12, 
                          color: isDark ? const Color(0xFF6EE7B7) : const Color(0xFF166534),
                        ),
                      ),
                    ),
                ],
              ),
              
              const SizedBox(height: 20),

              // Price
              Row(
                crossAxisAlignment: CrossAxisAlignment.baseline,
                textBaseline: TextBaseline.alphabetic,
                children: [
                  Text(
                    "\$${widget.price}",
                    style: TextStyle(fontSize: 48, fontWeight: FontWeight.bold, letterSpacing: -2.0, color: textColor),
                  ),
                  const SizedBox(width: 4),
                  Text(
                    widget.isYearly ? "/month (billed yearly)" : "/month",
                    style: TextStyle(color: bodyColor, fontSize: 14),
                  ),
                ],
              ),

              const SizedBox(height: 16),
              
              // Description
              Text(widget.description, style: TextStyle(color: bodyColor, height: 1.5)),

              const SizedBox(height: 32),
              Divider(height: 1, color: borderColor),
              const SizedBox(height: 32),

              // Features List
              ...widget.features.entries.map((entry) => _buildFeatureRow(context, entry.key, entry.value)),

              const SizedBox(height: 32),

              // Button (Scales on hover via parent container lift)
              SizedBox(
                width: double.infinity,
                child: ElevatedButton(
                  onPressed: () {},
                  style: ElevatedButton.styleFrom(
                    backgroundColor: isDark ? AppColors.primary : const Color(0xFF1F2937),
                    foregroundColor: Colors.white,
                    padding: const EdgeInsets.symmetric(vertical: 16),
                    shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(8)),
                    elevation: isHovered ? 5 : 0, // Button shadow on hover
                  ),
                  child: const Text("Try 7 days free", style: TextStyle(fontWeight: FontWeight.w600)),
                ),
              ),
            ],
          ),
        ),
      ),
    );
  }

  Widget _buildFeatureRow(BuildContext context, String key, String value) {
    IconData icon;
    if (key.contains("Workspace")) icon = Icons.folder_outlined;
    else if (key.contains("User")) icon = Icons.person_outline;
    else if (key.contains("Social")) icon = Icons.camera_alt_outlined;
    else if (key.contains("AI")) icon = Icons.auto_awesome;
    else icon = Icons.cached;

    final iconColor = Theme.of(context).iconTheme.color;
    final textColor = Theme.of(context).textTheme.bodyLarge?.color;
    final valueColor = Theme.of(context).textTheme.displayLarge?.color;

    return Padding(
      padding: const EdgeInsets.only(bottom: 16),
      child: Row(
        children: [
          Icon(icon, size: 20, color: iconColor?.withOpacity(0.7)),
          const SizedBox(width: 12),
          Text(key, style: TextStyle(color: textColor, fontWeight: FontWeight.w500)),
          const Spacer(),
          Text(value, style: TextStyle(fontWeight: FontWeight.bold, color: valueColor)),
        ],
      ),
    );
  }
}
--- File: ./lib/features/home/widgets/product.dart ---
import 'dart:async';
import 'package:flutter/material.dart';
import 'package:font_awesome_flutter/font_awesome_flutter.dart';
import 'package:flutter_animate/flutter_animate.dart';
import '../../../core/theme/app_colors.dart';
import '../../../shared/widgets/fade_in_scroll.dart';
import '../../../shared/layout/responsive.dart';

class ProductivitySection extends StatelessWidget {
  const ProductivitySection({super.key});

  @override
  Widget build(BuildContext context) {
    bool isMobile = Responsive.isMobile(context);
    
    // 1. Capture Theme Colors
    final bgColor = Theme.of(context).scaffoldBackgroundColor;
    final textColor = Theme.of(context).textTheme.displayLarge?.color;
    final bodyColor = Theme.of(context).textTheme.bodyLarge?.color;

    return Container(
      color: bgColor,
      padding: const EdgeInsets.symmetric(vertical: 80, horizontal: 20),
      child: Center(
        child: ConstrainedBox(
          constraints: const BoxConstraints(maxWidth: 1000),
          child: Column(
            children: [
              // HEADER (Animated)
              FadeInScroll(
                child: Text(
                  "Maximum Productivity",
                  textAlign: TextAlign.center,
                  style: TextStyle(
                    fontSize: 40,
                    fontWeight: FontWeight.w800,
                    letterSpacing: -1.0,
                    color: textColor,
                  ),
                ),
              ),
              
              const SizedBox(height: 16),
              
              FadeInScroll(
                delay: const Duration(milliseconds: 100),
                child: Text(
                  "Everything you need to scale your operations without the headache.",
                  textAlign: TextAlign.center,
                  style: TextStyle(fontSize: 18, color: bodyColor),
                ),
              ),

              const SizedBox(height: 60),


              if (isMobile)
                Column(
                  children: const[
                    _HoverBentoCard(
                      height: 320,
                      padding: EdgeInsets.zero,
                      delay: 0,
                      child: _IntegrationsScrollingCard(),
                    ),
                    const SizedBox(height: 20),
                    _HoverBentoCard(
                      height: 320,
                      delay: 100,
                      child: _StatusCard(),
                    ),
                  ],
                )
              else
                Row(
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: const[
                    Expanded(
                      flex: 2,
                      child: _HoverBentoCard(
                        height: 320,
                        padding: EdgeInsets.zero,
                        delay: 0,
                        child: _IntegrationsScrollingCard(),
                      ),
                    ),
                    const SizedBox(width: 20),
                    Expanded(
                      flex: 1,
                      child: _HoverBentoCard(
                        height: 320,
                        delay: 100,
                        child: _StatusCard(),
                      ),
                    ),
                  ],
                ),

              const SizedBox(height: 20),

               Builder(builder: (context) {
                final features = [
                  {"title": "99.9% Uptime", "icon": Icons.cloud_done, "color": Colors.green, "delay": 300},
                  {"title": "24/7 Support", "icon": Icons.headset_mic, "color": Colors.blue, "delay": 400},
                  {"title": "Open API", "icon": Icons.code, "color": Colors.orange, "delay": 500},
                ];
                
                final widgets = features.map((f) => _HoverBentoCard(
                  height: 160,
                  delay: f['delay'] as int,
                  child: _FeatureIconCard(title: f['title'] as String, icon: f['icon'] as IconData, color: f['color'] as Color),
                )).toList();

                if (isMobile) return Column(children: widgets.map((w) => Padding(padding: const EdgeInsets.only(bottom: 20), child: w)).toList());
                
                return Row(children: [
                  Expanded(child: widgets[0]),
                  const SizedBox(width: 20),
                  Expanded(child: widgets[1]),
                  const SizedBox(width: 20),
                  Expanded(child: widgets[2]),
                ]);
              }),

              const SizedBox(height: 20),

              // --- ROW 3 ---
              if (isMobile)
                Column(children: const [
                  _HoverBentoCard(height: 320, delay: 600, child: _TaskListCard()),
                  SizedBox(height: 20),
                  _HoverBentoCard(height: 320, padding: EdgeInsets.zero, delay: 750, child: _InfrastructureCard()),
                ])
              else
                Row(crossAxisAlignment: CrossAxisAlignment.start, children: const [
                  Expanded(flex: 1, child: _HoverBentoCard(height: 320, delay: 600, child: _TaskListCard())),
                  SizedBox(width: 20),
                  Expanded(flex: 2, child: _HoverBentoCard(height: 320, padding: EdgeInsets.zero, delay: 750, child: _InfrastructureCard())),
                ]),
            ],
          ),
        ),
      ),
    );
  }

}

 
class _HoverBentoCard extends StatefulWidget {
  final Widget child;
  final double height;
  final EdgeInsetsGeometry? padding;
  final int delay;

  const _HoverBentoCard({
    required this.child, 
    required this.height, 
    this.padding, 
    this.delay = 0
  });

  @override
  State<_HoverBentoCard> createState() => _HoverBentoCardState();
}

class _HoverBentoCardState extends State<_HoverBentoCard> {
  bool isHovered = false;

  @override
  Widget build(BuildContext context) {
    // 2. Capture Card Colors
    final cardColor = Theme.of(context).cardColor;
    final borderColor = Theme.of(context).dividerColor;

    return FadeInScroll(
      delay: Duration(milliseconds: widget.delay),
      child: MouseRegion(
        onEnter: (_) => setState(() => isHovered = true),
        onExit: (_) => setState(() => isHovered = false),
        child: AnimatedContainer(
          duration: const Duration(milliseconds: 200),
          curve: Curves.easeOut,
          height: widget.height,
          padding: widget.padding ?? const EdgeInsets.all(24),
          // LIFT ANIMATION
          transform: isHovered ? Matrix4.translationValues(0, -6, 0) : Matrix4.identity(),
          decoration: BoxDecoration(
            color: cardColor, // Dynamic Background
            borderRadius: BorderRadius.circular(20),
            // BORDER HIGHLIGHT
            border: Border.all(
              color: isHovered ? AppColors.primary.withOpacity(0.3) : borderColor, 
              width: 1
            ),
            // GLOW
            boxShadow: [
               if (isHovered)
                 BoxShadow(color: AppColors.primary.withOpacity(0.1), blurRadius: 20, offset: const Offset(0, 10)),
            ],
          ),
          child: ClipRRect(
            borderRadius: BorderRadius.circular(20),
            child: widget.child,
          ),
        ),
      ),
    );
  }
}

// --- 1. INTEGRATIONS SCROLLING CARD ---
class _IntegrationsScrollingCard extends StatefulWidget {
  const _IntegrationsScrollingCard();

  @override
  State<_IntegrationsScrollingCard> createState() => _IntegrationsScrollingCardState();
}

class _IntegrationsScrollingCardState extends State<_IntegrationsScrollingCard> {
  late ScrollController _scrollController;
  late Timer _timer;
  
  // List of Social Icons from FontAwesome
  final List<IconData> _icons = [
    FontAwesomeIcons.xTwitter,
    FontAwesomeIcons.linkedinIn,
    FontAwesomeIcons.tiktok,
    FontAwesomeIcons.threads,
    FontAwesomeIcons.facebook,
    FontAwesomeIcons.telegram,
    FontAwesomeIcons.slack,
    FontAwesomeIcons.pinterest,
    FontAwesomeIcons.youtube,
    FontAwesomeIcons.google,
    FontAwesomeIcons.instagram,
    FontAwesomeIcons.discord,
    FontAwesomeIcons.whatsapp,
    FontAwesomeIcons.spotify,
  ];

  @override
  void initState() {
    super.initState();
    _scrollController = ScrollController();
    WidgetsBinding.instance.addPostFrameCallback((_) => _startScrolling());
  }

  void _startScrolling() {
    // Smooth auto-scroll logic
    _timer = Timer.periodic(const Duration(milliseconds: 30), (timer) {
      if (!_scrollController.hasClients) return;
      double maxScroll = _scrollController.position.maxScrollExtent;
      double currentScroll = _scrollController.offset;
      double nextScroll = currentScroll + 1.0; 

      if (nextScroll >= maxScroll) {
        _scrollController.jumpTo(0);
      } else {
        _scrollController.jumpTo(nextScroll);
      }
    });
  }

  @override
  void dispose() {
    _timer.cancel();
    _scrollController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    final textColor = Theme.of(context).textTheme.displayLarge?.color;
    final bodyColor = Theme.of(context).textTheme.bodyLarge?.color;
    final isDark = Theme.of(context).brightness == Brightness.dark;

    return Padding(
      padding: const EdgeInsets.all(24),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          Text("Social integrations", style: TextStyle(fontSize: 20, fontWeight: FontWeight.bold, color: textColor)),
          const SizedBox(height: 8),
          Text(
            "Over 30+ integrations including social, design, ecommerce and even our API.", 
            style: TextStyle(color: bodyColor, fontSize: 15, height: 1.5)
          ),
          
          const Spacer(),

          // Scrolling Icons Row
          SizedBox(
            height: 80,
            child: ListView.builder(
              controller: _scrollController,
              scrollDirection: Axis.horizontal,
              physics: const NeverScrollableScrollPhysics(), // User can't manually scroll effectively since timer overrides, but standard pattern is disabling physics or allowing handle
              itemCount: 1000, // Infinite illusion
              itemBuilder: (context, index) {
                final icon = _icons[index % _icons.length];
                return Container(
                  width: 60,
                  height: 60,
                  margin: const EdgeInsets.symmetric(horizontal: 12),
                  decoration: BoxDecoration(
                    shape: BoxShape.circle,
                    color: isDark ? Colors.white.withOpacity(0.05) : Colors.grey.shade100,
                    boxShadow: [
                       BoxShadow(
                         color: Colors.black.withOpacity(0.05),
                         blurRadius: 10,
                         offset: const Offset(0, 4),
                       )
                    ]
                  ),
                  alignment: Alignment.center,
                  child: FaIcon(icon, size: 24, color: isDark ? Colors.white : Colors.black87),
                );
              },
            ),
          ),
          
          const Spacer(),

          // Bottom Link
          Row(
            children: [
              Text("Check all integrations", style: TextStyle(fontWeight: FontWeight.w600, color: textColor)),
              const SizedBox(width: 4),
              Icon(Icons.chevron_right, size: 16, color: textColor),
            ],
          )
        ],
      ),
    );
  }
}

// --- 2. STATUS CARD ---
class _StatusCard extends StatelessWidget {
  const _StatusCard();
  @override
  Widget build(BuildContext context) {
    final textColor = Theme.of(context).textTheme.displayLarge?.color;
    final bodyColor = Theme.of(context).textTheme.bodyLarge?.color;
    final isDark = Theme.of(context).brightness == Brightness.dark;
    return Column(
      mainAxisAlignment: MainAxisAlignment.center,
      children: [
        Container(
          width: 80, height: 80,
          decoration: BoxDecoration(color: isDark ? Colors.green.withOpacity(0.2) : Colors.green.withOpacity(0.1), shape: BoxShape.circle),
          child: const Icon(Icons.check_circle, color: Colors.green, size: 40),
        ),
        const SizedBox(height: 20),
        Text("All Systems Operational", textAlign: TextAlign.center, style: TextStyle(fontWeight: FontWeight.bold, fontSize: 18, color: textColor)),
        const SizedBox(height: 8),
        Text("Last check: 2m ago", style: TextStyle(color: bodyColor, fontSize: 14)),
      ],
    );
  }
}

// --- 3. FEATURE ICON CARD ---
class _FeatureIconCard extends StatelessWidget {
  final String title;
  final IconData icon;
  final Color color;
  const _FeatureIconCard({required this.title, required this.icon, required this.color});
  @override
  Widget build(BuildContext context) {
    final textColor = Theme.of(context).textTheme.displayLarge?.color;
    return Column(
      mainAxisAlignment: MainAxisAlignment.center,
      children: [
        Icon(icon, color: color, size: 32),
        const SizedBox(height: 12),
        Text(title, style: TextStyle(fontWeight: FontWeight.bold, fontSize: 16, color: textColor)),
      ],
    );
  }
}

// --- 4. TASK LIST CARD ---
class _TaskListCard extends StatelessWidget {
  const _TaskListCard();
  @override
  Widget build(BuildContext context) {
    final textColor = Theme.of(context).textTheme.displayLarge?.color;
    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        Text("Optimization", style: TextStyle(fontSize: 20, fontWeight: FontWeight.bold, color: textColor)),
        const SizedBox(height: 20),
        const _CheckItem(text: "Cache cleared", checked: true),
        const _CheckItem(text: "Database optimized", checked: true),
        const _CheckItem(text: "CDN synced", checked: true),
        const _CheckItem(text: "Backups completed", checked: false),
      ],
    );
  }
}

// Sub-widget for Task List
class _CheckItem extends StatelessWidget {
  final String text;
  final bool checked;
  const _CheckItem({required this.text, required this.checked});
  @override
  Widget build(BuildContext context) {
    final textColor = Theme.of(context).textTheme.displayLarge?.color;
    final disabledColor = Theme.of(context).textTheme.bodyLarge?.color?.withOpacity(0.5);
    return Padding(
      padding: const EdgeInsets.only(bottom: 12),
      child: Row(
        children: [
          Icon(checked ? Icons.check_circle : Icons.circle_outlined, color: checked ? AppColors.primary : disabledColor, size: 20),
          const SizedBox(width: 10),
          Text(text, style: TextStyle(color: checked ? textColor : disabledColor, fontWeight: FontWeight.w500)),
        ],
      ),
    );
  }
}

// --- 5. INFRASTRUCTURE CARD ---
class _InfrastructureCard extends StatelessWidget {
  const _InfrastructureCard();
  @override
  Widget build(BuildContext context) {
    return Stack(
      children: [
        Positioned.fill(
          child: Opacity(
            opacity: 0.8,
            child: Image.network("https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=800&q=80", fit: BoxFit.cover),
          ),
        ),
        Positioned.fill(
          child: Container(decoration: BoxDecoration(gradient: LinearGradient(begin: Alignment.bottomCenter, end: Alignment.topCenter, colors: [Colors.black.withOpacity(0.8), Colors.transparent]))),
        ),
        const Positioned(
          bottom: 24, left: 24,
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.start,
            children: [
              Text("Global Infrastructure", style: TextStyle(color: Colors.white, fontSize: 22, fontWeight: FontWeight.bold)),
              SizedBox(height: 4),
              Text("Servers in 24 regions", style: TextStyle(color: Colors.white70, fontSize: 14)),
            ],
          ),
        ),
      ],
    );
  }
}
--- File: ./lib/features/home/widgets/socialtrend.dart ---
import 'dart:async';
import 'package:flutter/material.dart';
import 'package:flutter_animate/flutter_animate.dart';
import '../../../core/theme/app_colors.dart';
import '../../../shared/widgets/fade_in_scroll.dart';

class SocialTrendSection extends StatelessWidget {
  const SocialTrendSection({super.key});

  static const List<Map<String, dynamic>> _posts = [
    {
      "name": "The Modern Gamer",
      "handle": "X.com",
      "avatar": "https://i.pravatar.cc/150?img=11",
      "icon": Icons.close, 
      "text": "Activision has taken its Call of Duty game down from the Microsoft Store, reportedly due to security concerns.",
      "image": "https://images.unsplash.com/photo-1542751371-adc38448a05e?w=500&q=80",
      "iconColor": Colors.black, 
    },
    {
      "name": "AI News Daily",
      "handle": "Facebook",
      "avatar": "https://i.pravatar.cc/150?img=3",
      "icon": Icons.facebook,
      "text": "Elon Musk is back in the spotlight with Grok 4, promising a 'ludicrous rate of progress' in AI development.",
      "image": "https://images.unsplash.com/photo-1620712943543-bcc4688e7485?w=500&q=80",
      "iconColor": Colors.blue,
    },
    {
      "name": "Bioscience Genius",
      "handle": "Instagram",
      "avatar": "https://i.pravatar.cc/150?img=5",
      "icon": Icons.camera_alt,
      "text": "Amoebas are BACK in the spotlight - single-celled, shapeshifting, and still ruling the microbial world.",
      "image": "https://images.unsplash.com/photo-1532094349884-543bc11b234d?w=500&q=80",
      "iconColor": Colors.pink,
    },
    {
      "name": "Tech Insider",
      "handle": "LinkedIn",
      "avatar": "https://i.pravatar.cc/150?img=8",
      "icon": Icons.business,
      "text": "Market trends show a massive shift towards automated content creation tools in 2025.",
      "image": "https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=500&q=80",
      "iconColor": Colors.blueAccent,
    },
  ];

  @override
  Widget build(BuildContext context) {
    // 1. Capture Theme Colors
    final bgColor = Theme.of(context).scaffoldBackgroundColor;
    final textColor = Theme.of(context).textTheme.displayLarge?.color;
    final bodyColor = Theme.of(context).textTheme.bodyLarge?.color;
    final iconColor = Theme.of(context).iconTheme.color;

    return Container(
      color: bgColor, // <--- Dynamic Background
      padding: const EdgeInsets.symmetric(vertical: 80),
      child: Column(
        children: [
          // 1. HEADLINE
          FadeInScroll(
            child: Text(
              "Keep your socials on-trend.",
              style: TextStyle(
                fontSize: 48,
                fontWeight: FontWeight.w800,
                color: textColor, // <--- Dynamic Text
                letterSpacing: -1.5,
              ),
              textAlign: TextAlign.center,
            ),
          ),
          
          const SizedBox(height: 16),

          // 2. SUBTITLE
          FadeInScroll(
            delay: const Duration(milliseconds: 100),
            child: Padding(
              padding: const EdgeInsets.symmetric(horizontal: 20),
              child: Text(
                "Consistency is key. With our intuitive calendar, you'll never\nmiss a chance to stay active and engaging.",
                style: TextStyle(
                  fontSize: 18,
                  color: bodyColor, // <--- Dynamic Text
                  height: 1.5,
                ),
                textAlign: TextAlign.center,
              ),
            ),
          ),


          const SizedBox(height: 24),

          // 3. CTA LINK
          FadeInScroll(
            delay: const Duration(milliseconds: 200),
            child: Row(
              mainAxisAlignment: MainAxisAlignment.center,
              children: [
                Text(
                  "Try calendar",
                  style: TextStyle(
                    fontWeight: FontWeight.w600,
                    color: textColor, // <--- Dynamic Text
                    fontSize: 16,
                  ),
                ),
                const SizedBox(width: 4),
                Icon(Icons.chevron_right, size: 18, color: iconColor?.withOpacity(0.7)),
              ],
            ),
          ),

          const SizedBox(height: 60),

          // 4. THE HORIZONTAL SCROLL AREA
          FadeInScroll(
            delay: const Duration(milliseconds: 300),
            slideOffset: const Offset(0, 0.1), // SlideY
            child: SizedBox(
              height: 450, 
              child: _InfiniteHorizontalList(posts: _posts),
            ),
          ),
        ],
      ),
    );
  }
}

// --- PART 2: THE SCROLLING ENGINE ---
class _InfiniteHorizontalList extends StatefulWidget {
  final List<Map<String, dynamic>> posts;
  const _InfiniteHorizontalList({required this.posts});

  @override
  State<_InfiniteHorizontalList> createState() => _InfiniteHorizontalListState();
}

class _InfiniteHorizontalListState extends State<_InfiniteHorizontalList> {
  late ScrollController _scrollController;
  late Timer _timer;
  
  @override
  void initState() {
    super.initState();
    _scrollController = ScrollController();
    WidgetsBinding.instance.addPostFrameCallback((_) => _startScrolling());
  }

  void _startScrolling() {
    _timer = Timer.periodic(const Duration(milliseconds: 30), (timer) {
      if (!_scrollController.hasClients) return;
      double maxScroll = _scrollController.position.maxScrollExtent;
      double currentScroll = _scrollController.offset;
      double nextScroll = currentScroll + 1.0; 

      if (nextScroll >= maxScroll) {
        _scrollController.jumpTo(0);
      } else {
        _scrollController.jumpTo(nextScroll);
      }
    });
  }

  @override
  void dispose() {
    _timer.cancel();
    _scrollController.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    // Capture the background color for the gradient fade
    final bgColor = Theme.of(context).scaffoldBackgroundColor;

    return Stack(
      children: [
        // A. The List
        ListView.builder(
          controller: _scrollController,
          scrollDirection: Axis.horizontal,
          physics: const NeverScrollableScrollPhysics(),
          itemCount: 1000, 
          itemBuilder: (context, index) {
            final post = widget.posts[index % widget.posts.length];
            return _SocialCard(
              name: post['name'],
              handle: post['handle'],
              avatar: post['avatar'],
              icon: post['icon'],
              text: post['text'],
              image: post['image'],
              iconColor: post['iconColor'],
            );
          },
        ),

        // B. Left Gradient (Fade)
        Positioned(
          left: 0, top: 0, bottom: 0,
          width: 150,
          child: Container(
            decoration: BoxDecoration(
              gradient: LinearGradient(
                begin: Alignment.centerLeft,
                end: Alignment.centerRight,
                colors: [
                  bgColor, // Solid color
                  bgColor.withOpacity(0.0) // Transparent
                ],
              ),
            ),
          ),
        ),

        // C. Right Gradient (Fade)
        Positioned(
          right: 0, top: 0, bottom: 0,
          width: 150,
          child: Container(
            decoration: BoxDecoration(
              gradient: LinearGradient(
                begin: Alignment.centerRight,
                end: Alignment.centerLeft,
                colors: [
                  bgColor, // Solid color
                  bgColor.withOpacity(0.0) // Transparent
                ],
              ),
            ),
          ),
        ),
      ],
    );
  }
}

// --- PART 3: THE INDIVIDUAL CARD DESIGN ---
class _SocialCard extends StatelessWidget {
  final String name;
  final String handle;
  final String avatar;
  final IconData icon;
  final String text;
  final String image;
  final Color iconColor;

  const _SocialCard({
    required this.name,
    required this.handle,
    required this.avatar,
    required this.icon,
    required this.text,
    required this.image,
    required this.iconColor,
  });
  @override
  Widget build(BuildContext context) {
    // 1. Capture Theme Colors for the Card
    final cardColor = Theme.of(context).cardColor;
    final borderColor = Theme.of(context).dividerColor;
    final textColor = Theme.of(context).textTheme.displayLarge?.color;
    final bodyColor = Theme.of(context).textTheme.bodyLarge?.color;
    final isDark = Theme.of(context).brightness == Brightness.dark;

    // Handle Icon Color: If it's the Black X icon, turn it White in Dark Mode
    Color finalIconColor = iconColor;
    if (iconColor == Colors.black && isDark) {
      finalIconColor = Colors.white;
    }

    return Container(
      width: 350,
      margin: const EdgeInsets.symmetric(horizontal: 16, vertical: 20),
      padding: const EdgeInsets.all(24),
      decoration: BoxDecoration(
        color: cardColor, // <--- Dynamic Card Background
        borderRadius: BorderRadius.circular(24),
        border: Border.all(color: borderColor), // <--- Dynamic Border
        boxShadow: [
          BoxShadow(
            color: Colors.black.withOpacity(0.05),
            blurRadius: 20,
            offset: const Offset(0, 10),
          )
        ],
      ),
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          // Header: Avatar + Name + Icon
          Row(
            children: [
              CircleAvatar(
                backgroundImage: NetworkImage(avatar),
                radius: 20,
              ),
              const SizedBox(width: 12),
              Column(
                crossAxisAlignment: CrossAxisAlignment.start,
                children: [
                  Text(name, style: TextStyle(fontWeight: FontWeight.bold, fontSize: 14, color: textColor)),
                  Text(handle, style: TextStyle(color: bodyColor, fontSize: 12)),
                ],
              ),
              const Spacer(),
              Container(
                padding: const EdgeInsets.all(8),
                decoration: BoxDecoration(
                  // Slightly lighter/darker circle for the icon
                  color: isDark ? Colors.white.withOpacity(0.1) : Colors.grey.shade50,
                  shape: BoxShape.circle,
                ),
                child: Icon(icon, size: 20, color: iconColor),
              )
            ],
          ),

          const SizedBox(height: 16),

          // Post Text
          Text(
            text,
            maxLines: 4,
            overflow: TextOverflow.ellipsis,
            style: TextStyle(color: bodyColor, fontSize: 15, height: 1.5), // <--- Dynamic Text
          ),

          const SizedBox(height: 20),

          // Post Image
          Expanded(
            child: ClipRRect(
              borderRadius: BorderRadius.circular(16),
              child: Image.network(
                image,
                width: double.infinity,
                fit: BoxFit.cover,
              ),
            ),
          ),
        ],
      ),
    );
  }
}
--- File: ./lib/features/home/widgets/target.dart ---
import 'package:flutter/material.dart';
import 'package:flutter_animate/flutter_animate.dart'; // Import Animate
import '../../../core/theme/app_colors.dart';
import '../../../shared/widgets/fade_in_scroll.dart';

class TargetAudienceSection extends StatelessWidget {
  const TargetAudienceSection({super.key});

  static const List<Map<String, dynamic>> _audiences = [
    {
      "title": "Domain Name\nRegistration",
      "desc": "Secure a unique online identity by registering with us and let us manage your domain name.",
      "image": "assets/images/web.gif",
      "delay": 100,
    },
    {
      "title": "Software Development",
      "desc": "We design, build and deploy custom solutions including websites, web and mobile apps building them to meet your business needs.",
      "image": "assets/images/sofware.gif",
      "delay": 200,
    },
    {
      "title": "Cloud and Email hosting",
      "desc": "We provide digital space and infrastructure for your business to thrive online.",
      "image": "assets/images/email.gif",
      "delay": 300,
    },
  ];

  @override
  Widget build(BuildContext context) {
    // 1. Capture Theme Colors
    final bgColor = Theme.of(context).scaffoldBackgroundColor;
    final textColor = Theme.of(context).textTheme.displayLarge?.color;
    final bodyColor = Theme.of(context).textTheme.bodyLarge?.color;

    return Container(
      color: bgColor,
      padding: const EdgeInsets.symmetric(vertical: 80, horizontal: 20),
      child: Column(
        children: [
          FadeInScroll(
            child: Text(
              "Our digital services",
              style: TextStyle(
                fontSize: 48,
                fontWeight: FontWeight.w800,
                color: textColor,
                letterSpacing: -1.5,
              ),
              textAlign: TextAlign.center,
            ),
          ),
          
          const SizedBox(height: 16),

          // 2. SUBTITLE (Animated)
          FadeInScroll(
            delay: const Duration(milliseconds: 100),
            child: Text(
              "We also offer a variety of didgital services that help you run business online.",
              style: TextStyle(
                fontSize: 18,
                color: bodyColor, // <--- Dynamic Text
                height: 1.5,
              ),
              textAlign: TextAlign.center,
            ),
          ),

          const SizedBox(height: 60),

          // 3. THE CARDS
          Wrap(
            spacing: 24,
            runSpacing: 24,
            alignment: WrapAlignment.center,
            children: _audiences.map((item){ 
              return _HoverTargetCard(
                title: item["title"],
                description: item["desc"],
                image: item["image"],
                delay: item["delay"],
              );
            }).toList(),
          ),
        ],
      ),
    );
  }
}

// --- NEW ANIMATED CARD WIDGET ---
class _HoverTargetCard extends StatefulWidget {
  final String title;
  final String description;
  final String image;
  final int delay;

  const _HoverTargetCard({
    required this.title,
    required this.description,
    required this.image,
    this.delay = 0,
  });

  @override
  State<_HoverTargetCard> createState() => _HoverTargetCardState();
}

class _HoverTargetCardState extends State<_HoverTargetCard> {
  bool isHovered = false;

  @override
  Widget build(BuildContext context) {
    // Capture colors for the card context (Exact logic from your code)
    final cardColor = Theme.of(context).cardColor;
    final textColor = Theme.of(context).textTheme.displayLarge?.color;
    final bodyColor = Theme.of(context).textTheme.bodyLarge?.color;
    final borderColor = Theme.of(context).dividerColor;
    
    // For the inner mockup: White in light mode, Black in dark mode
    final innerMockupColor = Theme.of(context).brightness == Brightness.dark 
        ? Colors.black 
        : Colors.white;

    return FadeInScroll(
      delay: Duration(milliseconds: widget.delay),
      child: MouseRegion(
        onEnter: (_) => setState(() => isHovered = true),
        onExit: (_) => setState(() => isHovered = false),
        child: AnimatedContainer(
          duration: const Duration(milliseconds: 200),
          curve: Curves.easeOut,
          width: 350,
          height: 480, 
          // 1. LIFT ANIMATION
          transform: isHovered ? Matrix4.translationValues(0, -10, 0) : Matrix4.identity(),
          decoration: BoxDecoration(
            color: cardColor, // <--- Dynamic Card Background
            borderRadius: BorderRadius.circular(24),
            border: isHovered 
                ? Border.all(color: AppColors.primary.withOpacity(0.5), width: 1) 
                : Border.all(color: borderColor),
            boxShadow: isHovered 
                ? [BoxShadow(color: AppColors.primary.withOpacity(0.15), blurRadius: 30, offset: const Offset(0, 20))]
                : [],
          ),
          child: Column(
            children: [
              // Text Content
              Padding(
                padding: const EdgeInsets.fromLTRB(32, 40, 32, 0),
                child: Column(
                  children: [
                    Text(
                      widget.title,
                      style: TextStyle(
                        fontSize: 24,
                        fontWeight: FontWeight.bold,
                        color: textColor, // <--- Dynamic Text
                        letterSpacing: -0.5,
                      ),
                    ),
                    const SizedBox(height: 16),
                    Text(
                      widget.description,
                      textAlign: TextAlign.center,
                      style: TextStyle(
                        color: bodyColor, // <--- Dynamic Text
                        fontSize: 16,
                        height: 1.5,
                      ),
                    ),
                  ],
                ),
              ),

              const Spacer(),

              AnimatedScale(
                scale: isHovered ? 1.05 : 1.0, 
                duration: const Duration(milliseconds: 300),
                curve: Curves.easeOutBack,
                child: Container(
                  height: 240, 
                  width: double.infinity,
                  margin: const EdgeInsets.fromLTRB(32, 0, 32, 32), 
                  decoration: BoxDecoration(
                    color: innerMockupColor, 
                    borderRadius: BorderRadius.circular(16),
                    boxShadow: [
                       BoxShadow(
                        color: Colors.black.withOpacity(0.08),
                        blurRadius: 15,
                        offset: const Offset(0, 5),
                      ),
                    ],
                    image: DecorationImage(
                      image: widget.image.startsWith('http') 
                        ? NetworkImage(widget.image)
                        : AssetImage(widget.image) as ImageProvider,
                      fit: BoxFit.cover,
                      alignment: Alignment.topCenter,
                    ),
                  ),
                  child: Container(
                    decoration: BoxDecoration(
                      borderRadius: BorderRadius.circular(16),
                      border: Border.all(color: borderColor), // <--- Dynamic Inner Border
                    ),
                  ),
                ),
              ),
            ],
          ),
        ),
      ),
    );
  }
}
--- File: ./lib/main.dart ---
import 'package:flutter/material.dart';
import 'core/router/app_router.dart';
import 'core/theme/app_theme.dart';
import 'package:google_fonts/google_fonts.dart';
import 'core/theme/theme_controller.dart'; 

void main() {
  runApp(const CissyTechApp());
}

class CissyTechApp extends StatelessWidget {
  const CissyTechApp({super.key});

  @override
  Widget build(BuildContext context) {
    // Listen to the ThemeController
    return ValueListenableBuilder<ThemeMode>(
      valueListenable: ThemeController.instance,
      builder: (context, currentMode, child) {
        return MaterialApp.router(
          title: 'Cissy Technologies Limited',
          debugShowCheckedModeBanner: false,

          // 1. Apply Inter Font to Light Theme
          theme: AppTheme.lightTheme.copyWith(
            textTheme: GoogleFonts.interTextTheme(AppTheme.lightTheme.textTheme),
          ),

          // 2. Apply Inter Font to Dark Theme
          darkTheme: AppTheme.darkTheme.copyWith(
            textTheme: GoogleFonts.interTextTheme(AppTheme.darkTheme.textTheme),
          ),
          
          // Use the current mode from the controller
          themeMode: currentMode, 
          
          routerConfig: appRouter,
        );
      },
    );
  }
}
--- File: ./lib/shared/layout/footer.dart ---
import 'package:flutter/material.dart';
import 'package:flutter_animate/flutter_animate.dart'; // Import Animate
import 'package:font_awesome_flutter/font_awesome_flutter.dart';
import 'package:url_launcher/url_launcher.dart';
import '../../core/theme/app_colors.dart';
import '../widgets/fade_in_scroll.dart';

class Footer extends StatelessWidget {
  const Footer({super.key});

  @override
  Widget build(BuildContext context) {
    // 1. Capture Theme Colors (Exact preservation of your logic)
    final isDark = Theme.of(context).brightness == Brightness.dark;
    final textColor = Theme.of(context).textTheme.displayLarge?.color; 
    final bodyColor = Theme.of(context).textTheme.bodyLarge?.color;    
    final bgColor = Theme.of(context).scaffoldBackgroundColor;         
    final dividerColor = Theme.of(context).dividerColor;

    return Container(
      color: bgColor,
      padding: const EdgeInsets.only(top: 80, bottom: 40, left: 40, right: 40),
          child: LayoutBuilder(
            builder: (context, constraints) {
              final isMobile = constraints.maxWidth < 800;
              
              // Define sections for reuse
              final brandSection = SizedBox(
                width: isMobile ? double.infinity : null, 
                child: Column(
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: [
                    Row(
                      children: [
                        Image.asset('assets/images/cissy_logo.png', height: 32),
                        const SizedBox(width: 10),
                        Text(
                          "CissyTech",
                          style: TextStyle(
                            fontSize: 24, 
                            fontWeight: FontWeight.bold,
                            color: isDark ? Colors.white : AppColors.brandGray,
                          ),
                        ),
                      ],
                    ),
                    const SizedBox(height: 20),
                    Text(
                      "Check us out on social media.",
                      style: TextStyle(color: bodyColor, fontSize: 16),
                    ),
                    const SizedBox(height: 24),
                    Row(
                      children: const [
                        _AnimatedSocialIcon(FontAwesomeIcons.whatsapp, url: "https://api.whatsapp.com/send?phone=256781776645&text=Hey%20CissyTech"),
                        _AnimatedSocialIcon(FontAwesomeIcons.instagram, url: "https://www.instagram.com/cissytech?igsh=MXU3YTh4NGx2NWp2bQ=="),
                        _AnimatedSocialIcon(FontAwesomeIcons.xTwitter, url: "https://x.com/cissytech"),
                        _AnimatedSocialIcon(FontAwesomeIcons.tiktok, url: "https://vm.tiktok.com/ZMHw9LjdJRAF9-oPRWx/"),
                        _AnimatedSocialIcon(FontAwesomeIcons.youtube, url: "https://www.youtube.com/@cissytech"),
                      ],
                    ),
                  ],
                ),
              );

              final linksSection = const _FooterColumn(
                title: "Links",
                links: {
                  "Services": "/services", 
                  "Products": "/products", 
                  "Features": "/features", 
                },
              );

              final supportSection = const _FooterColumn(
                title: "Support",
                links: {
                  "Help Center": "/help", 
                  "Service status": "/status"
                },
              );

              final contactSection = Column(
                crossAxisAlignment: CrossAxisAlignment.start,
                children: [
                   Text("Contact us", style: TextStyle(fontWeight: FontWeight.bold, fontSize: 18, color: textColor)),
                   const SizedBox(height: 20),
                   Row(
                     crossAxisAlignment: CrossAxisAlignment.start,
                     children: [
                       Icon(Icons.location_on_outlined, size: 20, color: bodyColor),
                       const SizedBox(width: 10),
                       Expanded(
                         child: Text(
                           "Plot 15A,\nNtinda Kampala, Uganda",
                           style: TextStyle(color: bodyColor, fontSize: 15),
                         ),
                       ),
                     ],
                   ),
                   const SizedBox(height: 16),
                   Row(
                     children: [
                       Icon(Icons.email_outlined, size: 20, color: bodyColor),
                       const SizedBox(width: 10),
                       _HoverLink(text: "info[@]cissytech.com", baseColor: bodyColor),
                     ],
                   ),
                   const SizedBox(height: 16),
                   Row(
                     children: [
                       Icon(Icons.phone_outlined, size: 20, color: bodyColor),
                       const SizedBox(width: 10),
                       _HoverLink(text: "+256 781 776 645", baseColor: bodyColor, url: "tel:+256781776645"),
                     ],
                   ),
                ],
              );

              return Column(
                children: [
                  // --- TOP SECTION ---
                  if (isMobile) 
                    Column(
                      crossAxisAlignment: CrossAxisAlignment.start,
                      children: [
                        brandSection,
                        const SizedBox(height: 40),
                        linksSection, // Links
                        const SizedBox(height: 40),
                        supportSection, // Support
                        const SizedBox(height: 40),
                        contactSection
                      ],
                    )
                  else
                    Row(
                      crossAxisAlignment: CrossAxisAlignment.start,
                      children: [
                        Expanded(flex: 2, child: brandSection),
                        Expanded(child: linksSection),
                        Expanded(child: supportSection),
                        Expanded(flex: 2, child: contactSection),
                      ],
                    ),

                  const SizedBox(height: 80),
                  
                  // --- DIVIDER ---
                  Divider(
                    color: isDark 
                        ? dividerColor 
                        : AppColors.brandGray.withOpacity(0.2)
                  ),
                  
                  const SizedBox(height: 30),

                  // --- BOTTOM SECTION ---
                  if (isMobile)
                    Column(
                      crossAxisAlignment: CrossAxisAlignment.start,
                      children: [
                        Text(
                          " Copyright CissyTech Ltd. All Rights Reserved.",
                          style: TextStyle(color: bodyColor?.withOpacity(0.7), fontSize: 14),
                        ),
                        const SizedBox(height: 20),
                        Wrap(
                          spacing: 20,
                          runSpacing: 10,
                          children: [
                            _HoverLink(text: "Terms of service", baseColor: bodyColor?.withOpacity(0.7), url: "https://cissytech.com/policies/refund-and-cancellation"),
                            _HoverLink(text: "Privacy policy", baseColor: bodyColor?.withOpacity(0.7), url: "https://cissytech.com/policies/refund-and-cancellation"),
                          ],
                        )
                      ],
                    )
                  else
                    Row(
                      mainAxisAlignment: MainAxisAlignment.spaceBetween,
                      children: [
                        Text(
                          " Copyright CissyTech Ltd. All Rights Reserved.",
                          style: TextStyle(color: bodyColor?.withOpacity(0.7), fontSize: 14),
                        ),
                        Row(
                          children: [
                            _HoverLink(text: "Terms of service", baseColor: bodyColor?.withOpacity(0.7), url: "https://cissytech.com/policies/refund-and-cancellation"),
                            const SizedBox(width: 20),
                            _HoverLink(text: "Privacy policy", baseColor: bodyColor?.withOpacity(0.7), url: "https://cissytech.com/policies/refund-and-cancellation"),
                          ],
                        )
                      ],
                    ),
                ]
              );
            }
          ),
    );
  }
}

// --- HELPER WIDGETS ---

class _FooterColumn extends StatelessWidget {
  final String title;
  final Map<String, String> links;

  const _FooterColumn({required this.title, required this.links});

  @override
  Widget build(BuildContext context) {
    final textColor = Theme.of(context).textTheme.displayLarge?.color;
    final bodyColor = Theme.of(context).textTheme.bodyLarge?.color;

    return SizedBox(
      width: 140, 
      child: Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          Text(title, style: TextStyle(fontWeight: FontWeight.bold, fontSize: 18, color: textColor)),
          const SizedBox(height: 20),
          ...links.entries.map((entry) => Padding(
            padding: const EdgeInsets.only(bottom: 12),
            // Replaced static Text with Animated Link Widget
            child: _HoverLink(text: entry.key, baseColor: bodyColor, url: entry.value),
          )),
        ],
      ),
    );
  }
}

// --- NEW ANIMATED LINK WIDGET ---
class _HoverLink extends StatefulWidget {
  final String text;
  final Color? baseColor;
  final String? url;

  const _HoverLink({required this.text, required this.baseColor, this.url});

  @override
  State<_HoverLink> createState() => _HoverLinkState();
}

class _HoverLinkState extends State<_HoverLink> {
  bool isHovered = false;

  Future<void> _launchUrl() async {
    if (widget.url != null) {
      final Uri uri = Uri.parse(widget.url!);
      if (await canLaunchUrl(uri)) {
        await launchUrl(uri);
      } else {
        debugPrint('Could not launch ${widget.url}');
      }
    }
  }

  @override
  Widget build(BuildContext context) {
    return GestureDetector(
      onTap: _launchUrl,
      child: MouseRegion(
        cursor: SystemMouseCursors.click,
        onEnter: (_) => setState(() => isHovered = true),
        onExit: (_) => setState(() => isHovered = false),
        child: AnimatedContainer(
          duration: const Duration(milliseconds: 200),
          // Slide right by 5px on hover
          transform: isHovered ? Matrix4.translationValues(5, 0, 0) : Matrix4.identity(),
          child: AnimatedDefaultTextStyle(
            duration: const Duration(milliseconds: 200),
            style: TextStyle(
              // Change color to Primary Blue on hover, otherwise use baseColor
              color: isHovered ? AppColors.primary : widget.baseColor,
              fontSize: 15,
              fontWeight: isHovered ? FontWeight.w500 : FontWeight.normal,
            ),
            child: Text(widget.text),
          ),
        ),
      ),
    );
  }
}

// --- NEW ANIMATED SOCIAL ICON ---
class _AnimatedSocialIcon extends StatefulWidget {
  final IconData icon;
  final String? url;
  const _AnimatedSocialIcon(this.icon, {this.url});

  @override
  State<_AnimatedSocialIcon> createState() => _AnimatedSocialIconState();
}

class _AnimatedSocialIconState extends State<_AnimatedSocialIcon> {
  bool isHovered = false;

  Future<void> _launchUrl() async {
    if (widget.url != null) {
      final Uri uri = Uri.parse(widget.url!);
      if (await canLaunchUrl(uri)) {
        await launchUrl(uri);
      } else {
         debugPrint('Could not launch ${widget.url}');
      }
    }
  }

  @override
  Widget build(BuildContext context) {
    final isDark = Theme.of(context).brightness == Brightness.dark;
    final iconColor = isDark ? Colors.white : AppColors.brandGray;

    return GestureDetector(
      onTap: _launchUrl,
      child: MouseRegion(
        cursor: SystemMouseCursors.click,
        onEnter: (_) => setState(() => isHovered = true),
        onExit: (_) => setState(() => isHovered = false),
        child: AnimatedContainer(
          duration: const Duration(milliseconds: 200),
          padding: const EdgeInsets.only(right: 16),
          // Lift up by 3px on hover
          transform: isHovered ? Matrix4.translationValues(0, -3, 0) : Matrix4.identity(),
          child: Icon(
            widget.icon, 
            size: 24, 
            // Turn Blue on hover
            color: isHovered ? AppColors.primary : iconColor
          ),
        ),
      ),
    );
  }
}

// --- NEW ANIMATED BUTTON ---
class _AnimatedButton extends StatefulWidget {
  final bool isDark;
  final String text;

  const _AnimatedButton({required this.isDark, required this.text});

  @override
  State<_AnimatedButton> createState() => _AnimatedButtonState();
}

class _AnimatedButtonState extends State<_AnimatedButton> {
  bool isHovered = false;

  @override
  Widget build(BuildContext context) {
    return MouseRegion(
      onEnter: (_) => setState(() => isHovered = true),
      onExit: (_) => setState(() => isHovered = false),
      child: AnimatedScale(
        scale: isHovered ? 1.05 : 1.0, // Scale up 5% on hover
        duration: const Duration(milliseconds: 200),
        curve: Curves.easeOut,
        child: ElevatedButton(
          onPressed: () {},
          style: ElevatedButton.styleFrom(
            backgroundColor: widget.isDark ? AppColors.primary : const Color(0xFF1F2937),
            foregroundColor: Colors.white,
            padding: const EdgeInsets.symmetric(horizontal: 24, vertical: 18),
            shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(8)),
            elevation: isHovered ? 5 : 0, 
          ),
          child: Text(widget.text),
        ),
      ),
    );
  }
}
--- File: ./lib/shared/layout/navbar.dart ---
import 'package:flutter/material.dart';
import 'package:go_router/go_router.dart';
import 'dart:ui';
import 'dart:async';
import '../../core/theme/app_colors.dart';
import '../../core/theme/theme_controller.dart';

// Data class for dropdown menu items
class DropdownItem {
  final String label;
  final VoidCallback? onTap;
  final IconData? icon;

  const DropdownItem({
    required this.label,
    this.onTap,
    this.icon,
  });
}

class Navbar extends StatefulWidget {
  final ScrollController? scrollController;

  const Navbar({super.key, this.scrollController});

  @override
  State<Navbar> createState() => _NavbarState();
}

class _NavbarState extends State<Navbar> {
  bool _isShrunk = false;
  double _lastOffset = 0.0;

  @override
  void initState() {
    super.initState();
    widget.scrollController?.addListener(_onScroll);
  }

  @override
  void dispose() {
    widget.scrollController?.removeListener(_onScroll);
    super.dispose();
  }

  void _onScroll() {
    if (widget.scrollController == null) return;
    
    final currentOffset = widget.scrollController!.offset;
    final maxScroll = widget.scrollController!.position.maxScrollExtent;

    if (currentOffset < 0 || currentOffset > maxScroll) return;

    if (currentOffset < 50) {
      if (_isShrunk) {
        setState(() => _isShrunk = false);
      }
      _lastOffset = currentOffset;
      return;
    }

    if ((currentOffset - _lastOffset).abs() > 10) {
      if (currentOffset > _lastOffset) {
        if (!_isShrunk) {
          setState(() => _isShrunk = true);
        }
      } else {
        if (_isShrunk) {
          setState(() => _isShrunk = false);
        }
      }
      _lastOffset = currentOffset;
    }
  }

  @override
  Widget build(BuildContext context) {
    final bool isMobile = MediaQuery.of(context).size.width < 800;
    final double screenWidth = MediaQuery.of(context).size.width;

    final isDark = Theme.of(context).brightness == Brightness.dark;
    final backgroundColor = Theme.of(context).cardColor.withOpacity(0.85);
    final textColor = Theme.of(context).textTheme.displayLarge?.color;
    final borderColor = Theme.of(context).dividerColor;
    final iconColor = Theme.of(context).iconTheme.color;

    final double targetWidth = isMobile 
        ? screenWidth - 32 
        : (_isShrunk ? 850 : 1200); 
    final Widget themeToggleButton = IconButton(
      onPressed: () {
        ThemeController.instance.toggleTheme();
      },
      icon: Icon(
        isDark ? Icons.light_mode : Icons.dark_mode_outlined,
        color: iconColor,
      ),
    );

    return Center(
      child: AnimatedContainer(
        duration: const Duration(milliseconds: 250),
        curve: Curves.easeOut, 
        height: 70,
        width: targetWidth, 
        margin: EdgeInsets.only(
          top: 20, 
          left: isMobile ? 0 : 0, 
          right: isMobile ? 0 : 0
        ),
        decoration: BoxDecoration(
          color: backgroundColor,
          borderRadius: BorderRadius.circular(_isShrunk ? 50 : 16),
          border: Border.all(color: borderColor),
          boxShadow: [
            BoxShadow(

              // Use brandGray for shadow to integrate brand color into depth
              color: isDark 
                  ? Colors.black.withOpacity(0.2) 
                  : AppColors.brandGray.withOpacity(0.1), 
              blurRadius: 20,
              offset: const Offset(0, 10),
            ),
          ],
        ),
        child: ClipRRect(
          borderRadius: BorderRadius.circular(_isShrunk ? 50 : 16),
          child: BackdropFilter(
            filter: ImageFilter.blur(sigmaX: 12, sigmaY: 12),
            child: Padding(
              padding: const EdgeInsets.symmetric(horizontal: 24),
              child: Row(
                children: [
                  Image.asset(
                    'assets/images/cissy_logo.png',
                    height: 28, 
                  ),
                  const SizedBox(width: 8),
                  Text(
                    "CissyTech", 
                    style: TextStyle(fontSize: 20, fontWeight: FontWeight.bold, color: isDark ? Colors.white : AppColors.brandGray)
                  ),

                  const Spacer(),

                  // --- MOBILE LAYOUT ---
                  if (isMobile) ...[
                    // 1. Theme Icon (Left of Menu)
                    themeToggleButton,
                    
                    const SizedBox(width: 4),

                    // 2. Menu Icon
                    IconButton(
                      icon: Icon(Icons.menu, color: iconColor),
                      onPressed: () {
                        showDialog(
                          context: context,
                          builder: (context) => const _MobileMenuDialog(),
                        );
                      },
                    ),
                  ] 
                  
                  // --- DESKTOP LAYOUT ---
                  else ...[
                      _HoverNavLink(
                        text: "Products", 
                        color: isDark ? Colors.white : AppColors.brandGray,
                        dropdownItems: [
                          DropdownItem(
                            label: "Collecto",
                            onTap: () => context.go('https://collecto.cissytech.com/'),
                          ),
                          DropdownItem(
                            label: "Bulk",
                            onTap: () => context.go('/'),
                          ),
                          DropdownItem(
                            label: "EWorker",
                            onTap: () => context.go('/'),
                          ),
                          DropdownItem(
                            label: "Cissy Cloud",
                            onTap: () => context.go('/'),
                          ),
                          DropdownItem(
                            label: "Cissy Drive",
                            onTap: () => context.go('/'),
                          ),
                        ],
                      ),
                      _HoverNavLink(
                        text: "Services", 
                        color: isDark ? Colors.white : AppColors.brandGray,
                        dropdownItems: [
                          DropdownItem(
                            label: "Web Development",
                          ),
                          DropdownItem(
                            label: "Domain Name Registration",
                          ),
                          DropdownItem(
                            label: "Cloud and Email Hosting",
                          ),
                          DropdownItem(
                            label: "Consulting",
                          ),
                        ],
                      ),
                      _HoverNavLink(
                        text: "Company", 
                        color: isDark ? Colors.white : AppColors.brandGray,
                        dropdownItems: [
                          DropdownItem(
                            label: "About Us",
                            icon: Icons.info,
                          ),
                          DropdownItem(
                            label: "Team",
                            icon: Icons.people,
                          ),
                          DropdownItem(
                            label: "Careers",
                            icon: Icons.work,
                          ),
                          DropdownItem(
                            label: "Blog",
                            icon: Icons.article,
                          ),
                        ],
                      ),
                      _HoverNavLink(
                        text: "Contact", 
                        color: isDark ? Colors.white : AppColors.brandGray,
                        dropdownItems: [
                          DropdownItem(
                            label: "Get in Touch",
                            icon: Icons.mail,
                          ),
                          DropdownItem(
                            label: "Support",
                            icon: Icons.support_agent,
                          ),
                          DropdownItem(
                            label: "Locations",
                            icon: Icons.location_on,
                          ),
                        ],
                      ),

                    const SizedBox(width: 20),

                    // 1. Theme Icon (Left of Button)
                    themeToggleButton,

                    const SizedBox(width: 10),

                    // 2. Get Started Button
                    ElevatedButton(
                      onPressed: () {},
                      style: ElevatedButton.styleFrom(
                        backgroundColor: AppColors.primary,
                        foregroundColor: Colors.white,
                        shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(30)),
                      ),
                      child: const Text("Login"),
                    ),
                  ],
                ],
              ),
            ),
          ),
        ),
      ),
    );
  }
}
class _HoverNavLink extends StatefulWidget {
  final String text;
  final Color? color;
  final VoidCallback? onTap;
  final List<DropdownItem>? dropdownItems;

  const _HoverNavLink({
    required this.text,
    required this.color,
    this.onTap,
    this.dropdownItems,
  });

  @override
  State<_HoverNavLink> createState() => _HoverNavLinkState();
}

class _HoverNavLinkState extends State<_HoverNavLink> {
  bool isHovered = false;
  bool showDropdown = false;
  OverlayEntry? _overlayEntry;
  final LayerLink _layerLink = LayerLink();
  Timer? _hoverTimer;

  @override
  void dispose() {
    _hoverTimer?.cancel();
    _removeOverlay();
    super.dispose();
  }

  void _removeOverlay() {
    _overlayEntry?.remove();
    _overlayEntry = null;
    showDropdown = false;
  }

  void _showDropdown() {
    if (widget.dropdownItems == null || widget.dropdownItems!.isEmpty) return;
    if (_overlayEntry != null) return; // Already showing

    _overlayEntry = _createOverlayEntry();
    Overlay.of(context).insert(_overlayEntry!);
    setState(() => showDropdown = true);
  }

  void _hideDropdown() {
    _removeOverlay();
    if (mounted) {
      setState(() => showDropdown = false);
    }
  }

  OverlayEntry _createOverlayEntry() {
    final isDark = Theme.of(context).brightness == Brightness.dark;
    final backgroundColor = Theme.of(context).cardColor.withOpacity(0.85);
    final borderColor = Theme.of(context).dividerColor;

    return OverlayEntry(
      builder: (context) => Positioned(
        width: 220,
        child: CompositedTransformFollower(
          link: _layerLink,
          showWhenUnlinked: false,
          offset: const Offset(0, 35), // Reduced gap from 40 to 35
          child: Material(
            color: Colors.transparent,
            child: MouseRegion(
              onEnter: (_) {
                // Cancel any pending hide operation
                _hoverTimer?.cancel();
                setState(() => isHovered = true);
              },
              onExit: (_) {
                // Start hide timer when leaving dropdown
                setState(() => isHovered = false);
                _hoverTimer?.cancel();
                _hoverTimer = Timer(const Duration(milliseconds: 150), () {
                  if (!isHovered && mounted) {
                    _hideDropdown();
                  }
                });
              },
              child: TweenAnimationBuilder<double>(
                duration: const Duration(milliseconds: 200),
                tween: Tween(begin: 0.0, end: 1.0),
                builder: (context, value, child) {
                  return Transform.scale(
                    scale: 0.95 + (0.05 * value),
                    alignment: Alignment.topCenter,
                    child: Opacity(
                      opacity: value,
                      child: child,
                    ),
                  );
                },
                child: Container(
                  margin: const EdgeInsets.only(top: 4), // Reduced from 8 to 4
                  decoration: BoxDecoration(
                    color: backgroundColor,
                    borderRadius: BorderRadius.circular(12),
                    border: Border.all(color: borderColor),
                    boxShadow: [
                      BoxShadow(
                        color: isDark
                            ? Colors.black.withOpacity(0.3)
                            : AppColors.brandGray.withOpacity(0.15),
                        blurRadius: 20,
                        offset: const Offset(0, 10),
                      ),
                    ],
                  ),
                  child: ClipRRect(
                    borderRadius: BorderRadius.circular(12),
                    child: BackdropFilter(
                      filter: ImageFilter.blur(sigmaX: 12, sigmaY: 12),
                      child: Column(
                        mainAxisSize: MainAxisSize.min,
                        children: widget.dropdownItems!.map((item) {
                          return _DropdownMenuItem(
                            item: item,
                            onTap: () {
                              _hideDropdown();
                              item.onTap?.call();
                            },
                          );
                        }).toList(),
                      ),
                    ),
                  ),
                ),
              ),
            ),
          ),
        ),
      ),
    );
  }

  @override
  Widget build(BuildContext context) {
    final hasDropdown = widget.dropdownItems != null && widget.dropdownItems!.isNotEmpty;

    return CompositedTransformTarget(
      link: _layerLink,
      child: Padding(
        padding: const EdgeInsets.symmetric(horizontal: 16),
        child: MouseRegion(
          cursor: SystemMouseCursors.click,
          onEnter: (_) {
            setState(() => isHovered = true);
            if (hasDropdown) {
              // Cancel any pending hide operation
              _hoverTimer?.cancel();
              // Show dropdown with a small delay
              _hoverTimer = Timer(const Duration(milliseconds: 150), () {
                if (isHovered && mounted) {
                  _showDropdown();
                }
              });
            }
          },
          onExit: (_) {
            setState(() => isHovered = false);
            if (hasDropdown) {
              // Cancel show timer and start hide timer
              _hoverTimer?.cancel();
              _hoverTimer = Timer(const Duration(milliseconds: 150), () {
                if (!isHovered && mounted) {
                  _hideDropdown();
                }
              });
            }
          },
          child: GestureDetector(
            onTap: widget.onTap,
            child: AnimatedContainer(
              duration: const Duration(milliseconds: 200),
              transform: isHovered ? Matrix4.translationValues(0, -2, 0) : Matrix4.identity(),
              child: Row(
                mainAxisSize: MainAxisSize.min,
                children: [
                  AnimatedDefaultTextStyle(
                    duration: const Duration(milliseconds: 200),
                    style: TextStyle(
                      fontWeight: FontWeight.w500,
                      fontSize: 16,
                      color: isHovered ? AppColors.primary : widget.color,
                    ),
                    child: Text(widget.text),
                  ),
                  if (hasDropdown) ...[
                    const SizedBox(width: 4),
                    AnimatedRotation(
                      duration: const Duration(milliseconds: 200),
                      turns: showDropdown ? 0.5 : 0,
                      child: Icon(
                        Icons.keyboard_arrow_down,
                        size: 18,
                        color: isHovered ? AppColors.primary : widget.color,
                      ),
                    ),
                  ],
                ],
              ),
            ),
          ),
        ),
      ),
    );
  }
}

// Dropdown menu item widget
class _DropdownMenuItem extends StatefulWidget {
  final DropdownItem item;
  final VoidCallback onTap;

  const _DropdownMenuItem({
    required this.item,
    required this.onTap,
  });

  @override
  State<_DropdownMenuItem> createState() => _DropdownMenuItemState();
}

class _DropdownMenuItemState extends State<_DropdownMenuItem> {
  bool isHovered = false;

  @override
  Widget build(BuildContext context) {
    final textColor = Theme.of(context).textTheme.displayLarge?.color;

    return MouseRegion(
      cursor: SystemMouseCursors.click,
      onEnter: (_) => setState(() => isHovered = true),
      onExit: (_) => setState(() => isHovered = false),
      child: GestureDetector(
        onTap: widget.onTap,
        child: AnimatedContainer(
          duration: const Duration(milliseconds: 150),
          padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 12),
          color: isHovered
              ? AppColors.primary.withOpacity(0.1)
              : Colors.transparent,
          child: Row(
            children: [
              if (widget.item.icon != null) ...[
                Icon(
                  widget.item.icon,
                  size: 18,
                  color: isHovered ? AppColors.primary : textColor?.withOpacity(0.7),
                ),
                const SizedBox(width: 12),
              ],
              Expanded(
                child: Text(
                  widget.item.label,
                  style: TextStyle(
                    fontSize: 14,
                    fontWeight: FontWeight.w500,
                    color: isHovered ? AppColors.primary : textColor,
                  ),
                ),
              ),
            ],
          ),
        ),
      ),
    );
  }
}

// Mobile Menu Dialog
class _MobileMenuDialog extends StatelessWidget {
  const _MobileMenuDialog();

  @override
  Widget build(BuildContext context) {
    final bgColor = Theme.of(context).cardColor;
    final textColor = Theme.of(context).textTheme.displayLarge?.color;

    return Dialog(
      backgroundColor: Colors.transparent,
      insetPadding: const EdgeInsets.all(20),
      alignment: Alignment.topCenter,
      child: Container(
        padding: const EdgeInsets.all(20),
        decoration: BoxDecoration(
          color: bgColor,
          borderRadius: BorderRadius.circular(20),
          border: Border.all(color: Theme.of(context).dividerColor),
        ),
        child: Column(
          mainAxisSize: MainAxisSize.min,
          crossAxisAlignment: CrossAxisAlignment.stretch,
          children: [
            Row(
              mainAxisAlignment: MainAxisAlignment.spaceBetween,
              children: [
                Text("Menu", style: TextStyle(fontSize: 20, fontWeight: FontWeight.bold, color: textColor)),
                IconButton(
                  onPressed: () => Navigator.pop(context), 
                  icon: Icon(Icons.close, color: textColor)
                ),
              ],
            ),
            const Divider(),
            
            // Products Section
            _MobileExpandableSection(
              title: "Products",
              textColor: textColor,
              items: [
                DropdownItem(label: "Collecto", onTap: () => context.go('https://collecto.cissytech.com/')),
                DropdownItem(label: "Bulk", onTap: () => context.go('/')),
                DropdownItem(label: "EWorker", onTap: () => context.go('/')),
                DropdownItem(label: "Cissy Cloud", onTap: () => context.go('/')),
                DropdownItem(label: "Cissy Drive", onTap: () => context.go('/')),
              ],
            ),
            
            // Services Section
            _MobileExpandableSection(
              title: "Services",
              textColor: textColor,
              items: [
                DropdownItem(label: "Web Development"),
                DropdownItem(label: "Domain Name Registration"),
                DropdownItem(label: "Cloud and Email Hosting"),
                DropdownItem(label: "Consulting"),
              ],
            ),
            
            // Company Section
            _MobileExpandableSection(
              title: "Company",
              textColor: textColor,
              items: [
                DropdownItem(label: "About Us"),
                DropdownItem(label: "Team"),
                DropdownItem(label: "Careers"),
                DropdownItem(label: "Blog"),
              ],
            ),
            
            // Contact Section
            _MobileExpandableSection(
              title: "Contact",
              textColor: textColor,
              items: [
                DropdownItem(label: "Get in Touch"),
                DropdownItem(label: "Support"),
                DropdownItem(label: "Locations"),
              ],
            ),
            
            const SizedBox(height: 20),
            
            ElevatedButton(
              onPressed: () {},
              style: ElevatedButton.styleFrom(
                backgroundColor: AppColors.primary, 
                foregroundColor: Colors.white
              ),
              child: const Text("Login"),
            ),
          ],
        ),
      ),
    );
  }
}

// Expandable section for mobile menu
class _MobileExpandableSection extends StatelessWidget {
  final String title;
  final Color? textColor;
  final List<DropdownItem> items;

  const _MobileExpandableSection({
    required this.title,
    required this.textColor,
    required this.items,
  });

  @override
  Widget build(BuildContext context) {
    return Theme(
      data: Theme.of(context).copyWith(dividerColor: Colors.transparent),
      child: ExpansionTile(
        tilePadding: EdgeInsets.zero,
        title: Text(
          title,
          style: TextStyle(
            fontSize: 18,
            fontWeight: FontWeight.w500,
            color: textColor,
          ),
        ),
        iconColor: textColor,
        collapsedIconColor: textColor,
        children: items.map((item) {
          return InkWell(
            onTap: () {
              Navigator.pop(context);
              item.onTap?.call();
            },
            child: Padding(
              padding: const EdgeInsets.symmetric(vertical: 10, horizontal: 16),
              child: Align(
                alignment: Alignment.centerLeft,
                child: Text(
                  item.label,
                  style: TextStyle(
                    fontSize: 16,
                    color: textColor?.withOpacity(0.8),
                  ),
                ),
              ),
            ),
          );
        }).toList(),
      ),
    );
  }
}

--- File: ./lib/shared/layout/responsive.dart ---
import 'package:flutter/material.dart';

class Responsive extends StatelessWidget {
  final Widget mobile;
  final Widget? tablet;
  final Widget desktop;

  const Responsive({
    super.key,
    required this.mobile,
    this.tablet,
    required this.desktop,
  });
  static bool isMobile(BuildContext context) =>
      MediaQuery.of(context).size.width < 650;

  static bool isTablet(BuildContext context) =>
      MediaQuery.of(context).size.width >= 650 &&
      MediaQuery.of(context).size.width < 1100;

  static bool isDesktop(BuildContext context) =>
      MediaQuery.of(context).size.width >= 1100;

  @override
  Widget build(BuildContext context) {
    return LayoutBuilder(
      builder: (context, constraints) {
        if (constraints.maxWidth >= 1100) {
          return desktop;
        } else if (constraints.maxWidth >= 650) {
          return tablet ?? mobile; // Use mobile layout if tablet isn't defined
        } else {
          return mobile;
        }
      },
    );
  }
}
--- File: ./lib/shared/layout/web_lay.dart ---

--- File: ./lib/shared/widgets/cissy_button.dart ---

--- File: ./lib/shared/widgets/fade_in_scroll.dart ---
import 'package:flutter/material.dart';
import 'package:flutter_animate/flutter_animate.dart';
import 'package:visibility_detector/visibility_detector.dart';

class FadeInScroll extends StatefulWidget {
  final Widget child;
  final Duration delay;
  final Duration duration;
  final Offset slideOffset;

  const FadeInScroll({
    super.key,
    required this.child,
    this.delay = Duration.zero,
    this.duration = const Duration(milliseconds: 300), // Much faster default
    this.slideOffset = const Offset(0, 0.1), // Smaller slide for faster feel 
  });

  @override
  State<FadeInScroll> createState() => _FadeInScrollState();
}

class _FadeInScrollState extends State<FadeInScroll> with SingleTickerProviderStateMixin {
  late AnimationController _controller;
  bool _isVisible = false;
  final Key _key = UniqueKey(); // Unique key for visibility detector

  @override
  void initState() {
    super.initState();
    _controller = AnimationController(vsync: this);
  }

  @override
  void dispose() {
    _controller.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    return VisibilityDetector(
      key: _key,
      onVisibilityChanged: (info) {
        if (!_isVisible && info.visibleFraction > 0.1) {
          setState(() => _isVisible = true);
          // Play current animation
          // Note: We don't need to manually forward the controller if we use Animate(controller: ...) 
          // or just rely on the 'target' param or rebuilding.
          // Ideally, we want to start the animation ONCE.
        }
      },
      child: _isVisible
          ? Animate(
              delay: widget.delay,
              effects: [
                FadeEffect(duration: widget.duration, curve: Curves.easeOut),
                SlideEffect(
                  duration: widget.duration,
                  begin: widget.slideOffset,
                  end: Offset.zero,
                  curve: Curves.easeOut,
                ),
              ],
              child: widget.child,
            )
          : Opacity(
              // Keep it invisible and in layout until it animates
              opacity: 0, 
              child: widget.child
            ),
    );
  }
}

--- File: ./lib/shared/widgets/glass_card.dart ---

--- File: ./lib/shared/widgets/simple_video_player.dart ---
import 'package:flutter/material.dart';
import 'package:video_player/video_player.dart';
import 'package:visibility_detector/visibility_detector.dart';

class SimpleVideoPlayer extends StatefulWidget {
  final String assetPath;
  final bool autoPlay;

  const SimpleVideoPlayer({
    super.key, 
    required this.assetPath,
    this.autoPlay = true,
  });

  @override
  State<SimpleVideoPlayer> createState() => _SimpleVideoPlayerState();
}

class _SimpleVideoPlayerState extends State<SimpleVideoPlayer> {
  late VideoPlayerController _controller;
  bool _isError = false;

  @override
  void initState() {
    super.initState();
    if (widget.assetPath.startsWith('http')) {
      _controller = VideoPlayerController.networkUrl(Uri.parse(widget.assetPath));
    } else {
      _controller = VideoPlayerController.asset(widget.assetPath);
    }
    _controller
      ..initialize().then((_) {
        setState(() {});
      }).catchError((error) {
        debugPrint("Video Error: $error");
        setState(() => _isError = true);
      });
  }

  @override
  void dispose() {
    _controller.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    if (_isError) {
      return const Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            Icon(Icons.error_outline, color: Colors.red, size: 40),
            SizedBox(height: 8),
            Text("Video Error", style: TextStyle(color: Colors.red)),
          ],
        ),
      );
    }

    if (!_controller.value.isInitialized) {
      return const Center(child: CircularProgressIndicator());
    }

    return VisibilityDetector(
      key: Key(widget.assetPath),
      onVisibilityChanged: (info) {
        if (widget.autoPlay && 
            info.visibleFraction > 0.6 && 
            !_controller.value.isPlaying && 
            _controller.value.isInitialized) {
           _controller.play();
           setState(() {}); 
        }
      },
      child: Stack(
        alignment: Alignment.center,
        children: [
          AspectRatio(
            aspectRatio: _controller.value.aspectRatio,
            child: VideoPlayer(_controller),
          ),
          // Play/Pause Overlay
          GestureDetector(
            onTap: () {
              setState(() {
                _controller.value.isPlaying
                    ? _controller.pause()
                    : _controller.play();
              });
            },
            child: Container(
               color: _controller.value.isPlaying ? Colors.transparent : Colors.black.withOpacity(0.4),
               child: Center(
                 child: _controller.value.isPlaying 
                   ? const SizedBox.shrink()
                   : const Icon(
                       Icons.play_circle,
                       color: Colors.white,
                       size: 64,
                     ),
               ),
            ),
          ),
        ],
      ),
    );
  }
}

--- File: ./lib/shared/widgets/video_thumbnail.dart ---
import 'package:flutter/material.dart';
import 'package:url_launcher/url_launcher.dart';

class VideoThumbnail extends StatefulWidget {
  final String videoUrl;
  final String? thumbnailUrl;
  final String? title;

  const VideoThumbnail({
    super.key,
    required this.videoUrl,
    this.thumbnailUrl,
    this.title,
  });

  @override
  State<VideoThumbnail> createState() => _VideoThumbnailState();
}

class _VideoThumbnailState extends State<VideoThumbnail> {
  bool isHovered = false;

  String _getThumbnailUrl() {
    if (widget.thumbnailUrl != null) return widget.thumbnailUrl!;
    
    // Extract video ID and generate YouTube thumbnail URL
    final videoId = _extractVideoId(widget.videoUrl);
    if (videoId != null) {
      return 'https://img.youtube.com/vi/$videoId/maxresdefault.jpg';
    }
    return '';
  }

  String? _extractVideoId(String url) {
    final patterns = [
      RegExp(r'youtube\.com/watch\?v=([^&]+)'),
      RegExp(r'youtu\.be/([^?]+)'),
      RegExp(r'youtube\.com/embed/([^?]+)'),
    ];

    for (final pattern in patterns) {
      final match = pattern.firstMatch(url);
      if (match != null) return match.group(1);
    }
    return null;
  }

  Future<void> _openVideo() async {
    final uri = Uri.parse(widget.videoUrl);
    if (await canLaunchUrl(uri)) {
      await launchUrl(uri, mode: LaunchMode.externalApplication);
    }
  }

  @override
  Widget build(BuildContext context) {
    final thumbnailUrl = _getThumbnailUrl();

    return MouseRegion(
      onEnter: (_) => setState(() => isHovered = true),
      onExit: (_) => setState(() => isHovered = false),
      child: GestureDetector(
        onTap: _openVideo,
        child: AnimatedContainer(
          duration: const Duration(milliseconds: 200),
          transform: isHovered ? Matrix4.translationValues(0, -2, 0) : Matrix4.identity(),
          child: Stack(
            fit: StackFit.expand,
            children: [
              // Thumbnail image
              if (thumbnailUrl.isNotEmpty)
                ClipRRect(
                  borderRadius: BorderRadius.circular(20),
                  child: Image.network(
                    thumbnailUrl,
                    fit: BoxFit.cover,
                    errorBuilder: (context, error, stackTrace) {
                      return Container(
                        color: Colors.grey[800],
                        child: const Center(
                          child: Icon(Icons.play_circle_outline, size: 80, color: Colors.white),
                        ),
                      );
                    },
                  ),
                ),
              
              // Dark overlay
              Container(
                decoration: BoxDecoration(
                  borderRadius: BorderRadius.circular(20),
                  gradient: LinearGradient(
                    begin: Alignment.topCenter,
                    end: Alignment.bottomCenter,
                    colors: [
                      Colors.black.withOpacity(0.3),
                      Colors.black.withOpacity(0.6),
                    ],
                  ),
                ),
              ),

              // Play button
              Center(
                child: AnimatedScale(
                  duration: const Duration(milliseconds: 200),
                  scale: isHovered ? 1.1 : 1.0,
                  child: Container(
                    width: 80,
                    height: 80,
                    decoration: BoxDecoration(
                      color: Colors.red,
                      shape: BoxShape.circle,
                      boxShadow: [
                        BoxShadow(
                          color: Colors.black.withOpacity(0.3),
                          blurRadius: 20,
                          offset: const Offset(0, 4),
                        ),
                      ],
                    ),
                    child: const Icon(
                      Icons.play_arrow,
                      color: Colors.white,
                      size: 50,
                    ),
                  ),
                ),
              ),

              // Title overlay (if provided)
              if (widget.title != null)
                Positioned(
                  bottom: 20,
                  left: 20,
                  right: 20,
                  child: Text(
                    widget.title!,
                    style: const TextStyle(
                      color: Colors.white,
                      fontSize: 18,
                      fontWeight: FontWeight.bold,
                      shadows: [
                        Shadow(
                          color: Colors.black,
                          blurRadius: 10,
                        ),
                      ],
                    ),
                  ),
                ),
            ],
          ),
        ),
      ),
    );
  }
}

--- File: ./lib/shared/widgets/youtube_embeded.dart ---
import 'package:flutter/material.dart';
import 'package:youtube_player_iframe/youtube_player_iframe.dart';
import 'dart:async';

class YouTubeEmbed extends StatefulWidget {
  final String videoUrl;
  final bool autoPlay;

  const YouTubeEmbed({
    super.key, 
    required this.videoUrl,
    this.autoPlay = false,
  });

  @override
  State<YouTubeEmbed> createState() => _YouTubeEmbedState();
}

class _YouTubeEmbedState extends State<YouTubeEmbed> {
  late YoutubePlayerController _controller;
  bool _showOverlay = true;
  Timer? _hoverTimer;

  @override
  void initState() {
    super.initState();
    
    // 1. Get the ID (e.g., "abc12345" from "youtube.com/watch?v=abc12345")
    final videoId = YoutubePlayerController.convertUrlToId(widget.videoUrl) ?? '';

    // 2. Setup the Controller
    _controller = YoutubePlayerController.fromVideoId(
      videoId: videoId,
      autoPlay: widget.autoPlay,
      params: const YoutubePlayerParams(
        showControls: true,
        showFullscreenButton: true,
        loop: true,
        color: 'white',
        strictRelatedVideos: true, 
        mute: false,
        showVideoAnnotations: false,
      ),
    );
  }

  @override
  void dispose() {
    _hoverTimer?.cancel();
    _controller.close();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    return ClipRRect(
      borderRadius: BorderRadius.circular(20),
      child: MouseRegion(
        onEnter: (_) {
          // Start timer to hide overlay after hovering for 500ms
          _hoverTimer?.cancel();
          _hoverTimer = Timer(const Duration(milliseconds: 500), () {
            if (mounted) {
              setState(() => _showOverlay = false);
            }
          });
        },
        onExit: (_) {
          // Cancel timer and show overlay when mouse leaves
          _hoverTimer?.cancel();
          if (mounted) {
            setState(() => _showOverlay = true);
          }
        },
        child: Stack(
          children: [
            YoutubePlayer(
              controller: _controller,
              aspectRatio: 16 / 9,
            ),
            // Overlay that blocks iframe interaction (allows scrolling)
            if (_showOverlay)
              Positioned.fill(
                child: Container(
                  color: Colors.black.withOpacity(0.01), // Nearly transparent
                  child: Center(
                    child: Container(
                      padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 8),
                      decoration: BoxDecoration(
                        color: Colors.black.withOpacity(0.6),
                        borderRadius: BorderRadius.circular(8),
                      ),
                      child: const Text(
                        'Hover to interact',
                        style: TextStyle(
                          color: Colors.white,
                          fontSize: 14,
                          fontWeight: FontWeight.w500,
                        ),
                      ),
                    ),
                  ),
                ),
              ),
          ],
        ),
      ),
    );
  }
}
--- File: ./pubspec.yaml ---
name: cissy_site
description: "A new Flutter project."
# The following line prevents the package from being accidentally published to
# pub.dev using `flutter pub publish`. This is preferred for private packages.
publish_to: 'none' # Remove this line if you wish to publish to pub.dev

# The following defines the version and build number for your application.
# A version number is three numbers separated by dots, like 1.2.43
# followed by an optional build number separated by a +.
# Both the version and the builder number may be overridden in flutter
# build by specifying --build-name and --build-number, respectively.
# In Android, build-name is used as versionName while build-number used as versionCode.
# Read more about Android versioning at https://developer.android.com/studio/publish/versioning
# In iOS, build-name is used as CFBundleShortVersionString while build-number is used as CFBundleVersion.
# Read more about iOS versioning at
# https://developer.apple.com/library/archive/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html
# In Windows, build-name is used as the major, minor, and patch parts
# of the product and file versions while build-number is used as the build suffix.
version: 1.0.0+1

environment:
  sdk: ^3.7.2

# Dependencies specify other packages that your package needs in order to work.
# To automatically upgrade your package dependencies to the latest versions
# consider running `flutter pub upgrade --major-versions`. Alternatively,
# dependencies can be manually updated by changing the version numbers below to
# the latest version available on pub.dev. To see which dependencies have newer
# versions available, run `flutter pub outdated`.
dependencies:
  flutter:
    sdk: flutter

  # The following adds the Cupertino Icons font to your application.
  # Use with the CupertinoIcons class for iOS style icons.
  cupertino_icons: ^1.0.8
  google_fonts: ^6.3.2
  flutter_animate: ^4.5.2
  flutter_staggered_grid_view: ^0.7.0
  go_router: ^17.0.0
  responsive_builder: ^0.7.1
  url_launcher: ^6.3.2
  flutter_svg: ^2.2.2
  visibility_detector: ^0.4.0+2
  font_awesome_flutter: ^10.9.1
  video_player: ^2.10.1
  video_player_win: ^3.2.2
  video_player_web: ^2.4.0
  youtube_player_iframe: ^5.1.0
  pointer_interceptor: ^0.10.1+2

dev_dependencies:
  flutter_test:
    sdk: flutter

  # The "flutter_lints" package below contains a set of recommended lints to
  # encourage good coding practices. The lint set provided by the package is
  # activated in the `analysis_options.yaml` file located at the root of your
  # package. See that file for information about deactivating specific lint
  # rules and activating additional ones.
  flutter_lints: ^5.0.0
  flutter_animate: ^4.2.0
  animated_text_kit: ^4.2.2

# For information on the generic Dart part of this file, see the
# following page: https://dart.dev/tools/pub/pubspec

# The following section is specific to Flutter packages.
flutter:

  # The following line ensures that the Material Icons font is
  # included with your application, so that you can use the icons in
  # the material Icons class.
  uses-material-design: true

  # To add assets to your application, add an assets section, like this:
  # assets:
  #   - images/a_dot_burr.jpeg
  #   - images/a_dot_ham.jpeg
  assets:
    - assets/images/

  # An image asset can refer to one or more resolution-specific "variants", see
  # https://flutter.dev/to/resolution-aware-images

  # For details regarding adding assets from package dependencies, see
  # https://flutter.dev/to/asset-from-package

  # To add custom fonts to your application, add a fonts section here,
  # in this "flutter" section. Each entry in this list should have a
  # "family" key with the font family name, and a "fonts" key with a
  # list giving the asset and other descriptors for the font. For
  # example:
  # fonts:
  #   - family: Schyler
  #     fonts:
  #       - asset: fonts/Schyler-Regular.ttf
  #       - asset: fonts/Schyler-Italic.ttf
  #         style: italic
  #   - family: Trajan Pro
  #     fonts:
  #       - asset: fonts/TrajanPro.ttf
  #       - asset: fonts/TrajanPro_Bold.ttf
  #         weight: 700
  #
  # For details regarding fonts from package dependencies,
  # see https://flutter.dev/to/font-from-package

--- File: ./README.md ---
# cissy_site

A new Flutter project.

## Getting Started

This project is a starting point for a Flutter application.

A few resources to get you started if this is your first Flutter project:

- [Lab: Write your first Flutter app](https://docs.flutter.dev/get-started/codelab)
- [Cookbook: Useful Flutter samples](https://docs.flutter.dev/cookbook)

For help getting started with Flutter development, view the
[online documentation](https://docs.flutter.dev/), which offers tutorials,
samples, guidance on mobile development, and a full API reference.

--- File: ./test/widget_test.dart ---
// This is a basic Flutter widget test.
//
// To perform an interaction with a widget in your test, use the WidgetTester
// utility in the flutter_test package. For example, you can send tap and scroll
// gestures. You can also use WidgetTester to find child widgets in the widget
// tree, read text, and verify that the values of widget properties are correct.

import 'package:flutter/material.dart';
import 'package:flutter_test/flutter_test.dart';

import 'package:cissy_site/main.dart';

void main() {
  testWidgets('Counter increments smoke test', (WidgetTester tester) async {
    // Build our app and trigger a frame.
    await tester.pumpWidget(const MyApp());

    // Verify that our counter starts at 0.
    expect(find.text('0'), findsOneWidget);
    expect(find.text('1'), findsNothing);

    // Tap the '+' icon and trigger a frame.
    await tester.tap(find.byIcon(Icons.add));
    await tester.pump();

    // Verify that our counter has incremented.
    expect(find.text('0'), findsNothing);
    expect(find.text('1'), findsOneWidget);
  });
}

